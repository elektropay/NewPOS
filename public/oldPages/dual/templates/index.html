<ion-view view-title="MENUSIFU Restaurant">
   <div class="mask" ng-show="pay.sign && welcome"></div>
   <div class="mask-flex" ng-show="pay.sign && welcome">
      <div style="display:table;width:98%;line-height:2;font-weight:900;font-size:1.8em;text-align:center;background:#fff" ng-if="!pay.merchantId">
         <div style="display:table-row;height:60%;">
            <div   style="display:table-cell;position:relative;vertical-align:middle;
               border-style:solid;  
               border-width:1px 0px 0px 1px;
               border-color:#E3DAC9;width:33%;
               ">Amount 
            </div>
            <div style="display:table-cell;border-style:solid;  
               border-width:0px 1px 0px 1px;
               border-color:#E3DAC9">&nbsp;</div>
            <div   style="display:table-cell;vertical-align:middle;border-style:solid;  
               border-width:1px 0px 0px 0px;
               border-color:#E3DAC9;width:33%;">Paid</div>
            <div style="display:table-cell;border-style:solid;  
               border-width:0px 1px 0px 1px;
               border-color:#E3DAC9"></div>
            <div   style="display:table-cell;vertical-align:middle;border-style:solid;  
               border-width:1px 1px 0px 0px;
               border-color:#E3DAC9;width:33%;">Change</div>
         </div>
         <div style="display:table-row;height:40%;font-weight:600;font-size:1em">
            <div   style="display:table-cell;vertical-align:middle;
               border-style:solid;  
               border-width:0px 0px 1px 1px;
               border-color:#E3DAC9;background:#FFCD34;color:#fff;">{{pay.total | allTotal:this:pay.orderTips | currency}}
            </div>
            <div style="display:table-cell;border-style:solid;  
               border-width:0px 1px 0px 1px;
               border-color:#E3DAC9">&nbsp;</div>
            <div   style="display:table-cell;vertical-align:middle;border-style:solid;  
               border-width:0px 0px 1px 0px;
               border-color:#E3DAC9;background:#FFCD34;color:#fff">{{pay.paid | currency}}</div>
            <div style="display:table-cell;border-style:solid;  
               border-width:0px 1px 0px 1px;
               border-color:#E3DAC9">&nbsp;</div>
            <div   style="display:table-cell;vertical-align:middle;border-style:solid;  
               border-width:0px 1px 1px 0px;
               border-color:#E3DAC9;background:#FFCD34;color:#fff">{{pay.change | currency}}</div>
         </div>
      </div>
      <div class="nihaopay" ng-if="!!pay.merchantId">
         <div class="nihaopay-left">
            <div>
               <div style="flex:1">Amount:</div>
               <div>{{pay.total | allTotal:this:pay.orderTips | currency}}</div>
            </div>
            <div style="border-top:solid 1px #fff;border-bottom:solid 1px #fff">
               <div style="flex:1">Paid:</div>
               <div>{{pay.paid | currency}}</div>
            </div>
            <div >
               <div style="flex:1">Change:</div>
               <div>{{pay.change | currency}}</div>
            </div>
         </div>
         <div class="nihaopay-right" >
            <div>
               <qrcode version="5" error-correction-level="M" size="150" data="{{pay.qrcode}}"></qrcode>
               <b style="font-size:16px;">Support WeChat/Alipay</b>
            </div>
         </div>
      </div>
   </div>
   <div class="info" ng-if="welcome">
      <div class="info-header">
         {{restaurantInfo.name}} 
      </div>
      <img  ng-if="restaurantInfo.coverImage" src="{{photoUrl+restaurantInfo.coverImage}}"  class="info-logo" />
      <div class="info-content">
         <div style="text-align:right;width:100%"><b>Contact Info:</b>{{restaurantInfo.website?restaurantInfo.website:restaurantInfo.telephone1}}</div>
      </div>
   </div>
   <div class="bodyLeft">
      <div ng-class="{sliderMenusifu:true,leftPosition:!!welcome}" ng-if="transitionEffect =='FADE'">
         <div style="position:absolute;left:0;width:100%;height:100%;background:url('{{photoUrl}}/{{item.thumbPath}}');background-size:cover;"
            class="efg anim_fade_image{{$index}}" ng-repeat="item in gallery.photoList track by $index"></div>
      </div>
      <div ng-class="{sliderMenusifu:true,leftPosition:!!welcome}">
         <input name="control" id="page1" type="radio" checked/>
         <input name="control" id="page2" type="radio"/>
         <input name="control" id="page3" type="radio"/>
         <input name="control" id="page4" type="radio"/>
         <div class="sliderMenusifu--el sliderMenusifu--el-1 anim-4parts">
            <div class="sliderMenusifu--el-bg">
               <div class="part top left"></div>
               <div class="part top right"></div>
               <div class="part bot left"></div>
               <div class="part bot right"></div>
            </div>
            <div class="sliderMenusifu--el-content">
       
            </div>
         </div>
         <div class="sliderMenusifu--el sliderMenusifu--el-2 anim-9parts">
            <div class="sliderMenusifu--el-bg">
               <div class="part left-top"></div>
               <div class="part mid-top"></div>
               <div class="part right-top"></div>
               <div class="part left-mid"></div>
               <div class="part mid-mid"></div>
               <div class="part right-mid"></div>
               <div class="part left-bot"></div>
               <div class="part mid-bot"></div>
               <div class="part right-bot"></div>
            </div>
            <div class="sliderMenusifu--el-content">
               
            </div>
         </div>
         <div class="sliderMenusifu--el sliderMenusifu--el-3 anim-5parts">
            <div class="sliderMenusifu--el-bg">
               <div class="part part-1"></div>
               <div class="part part-2"></div>
               <div class="part part-3"></div>
               <div class="part part-4"></div>
               <div class="part part-5"></div>
            </div>
            <div class="sliderMenusifu--el-content">
               
            </div>
         </div>
         <div class="sliderMenusifu--el sliderMenusifu--el-4 anim-3parts">
            <div class="sliderMenusifu--el-bg">
               <div class="part left"></div>
               <div class="part mid"></div>
               <div class="part right"></div>
            </div>
            <div class="sliderMenusifu--el-content">
            </div>
         </div>
         <div class="sliderMenusifu--control left">
            <label class="page1-left" for="page1"></label>
            <label class="page2-left" for="page2"></label>
            <label class="page3-left" for="page3"></label>
            <label class="page4-left" for="page4"></label>
         </div>
         <div class="sliderMenusifu--control right">
            <label class="page1-right" for="page1"></label>
            <label class="page2-right" for="page2"></label>
            <label class="page3-right" for="page3"></label>
            <label class="page4-right" for="page4"></label>
         </div>
      </div>
   </div>
   
   <div class="bodyRight" ng-show="welcome">
   <div class="rightHead">
      <div>RECEIPT</div>
   </div>
   <div style="display:table;margin-top:3%;font-weight:900;
      width:100%;border:solid #E3DAC9  1px;width:95%;margin-left:2.5%;height:5%;font-size:1.3em"  class="headerSize">
      <div style="display:table-cell;width:13%;vertical-align:middle;">QTY</div>
      <div style="display:table-cell;width:72%;vertical-align:middle;">Menu Name</div>
      <div style="display:table-cell;width:15%;vertical-align:middle;">Price</div>
   </div>
    <ion-scroll style="width:100%;width:95%;margin-left:2.5%;height:66%;overflow-y: hidden" delegate-handle="small">
      <div style="display:table;margin-top:0%;
         width:100%;border-left:solid #E3DAC9  1px;border-right:solid #E3DAC9  1px;border-bottom:solid #E3DAC9 1px;width:100%;font-weight:600;" class="bodySize">
         <div   style="display:table-row;" ng-repeat="item in dishes  | filter:{name:'!==================',count:'!0'} track by $index">
            <div  ng-class="{'headTable-top':!$first}" style="display:table-cell;border-right:solid #E3DAC9 1px;width:15%" >{{item.count}}</div>
            <div ng-class="{'headTable-top':!$first}" style="display:table-cell;border-right:solid #E3DAC9 1px;width:65%;text-align:left;">
               <p ng-if="item.name[firstLg]">{{item.name[firstLg]?item.name[firstLg]:item.name}}
                  <span ng-if="item.size[firstLg]" style="padding-left:3px;color:#8B0000;">({{item.size.en}})</span>&nbsp;
                  <span ng-if="item.discount>0" style="color:#8B0000;">[Discount:${{item.discount}}]</span>&nbsp;
                  <span ng-if="item.charge>0" style="color:#8B0000;">[Charge:${{item.charge}}]</span>&nbsp;
                  <span ng-if="item.unit>0" style="color:#8B0000;">[Unit:{{item.unit}}]</span>  
               </p>
               <p ng-if="item.name[secondLg]">{{item.name[secondLg]}}<span ng-if="item.size[secondLg]" style="padding-left:3px;color:#8B0000;">
               ({{item.size[secondLg]}})</span></p>
               <div ng-repeat="cb in item.combo.section" style="text-align:left;">
                  &nbsp;&nbsp;{{cb.name[firstLg]}}{{cb.name[secondLg]}}
                  <div ng-repeat="cbItem in cb.items | filter:{count:'!0'}" style="text-align:left;color:#8B0000;clear:both">
                     &nbsp;
                     <p style="float:left;width:69%;overflow:hidden;">&nbsp;&nbsp;{{cbItem.name[firstLg]}}{{cbItem.name[secondLg]}}</p>
                     <p style="float:right;width:29%;overflow:hidden;text-align: right" ng-if="cbItem.price>0 || cbItem.count >1 "><span ng-if="cbItem.count>1">{{cbItem.count}} &#215; </span>{{cbItem.price | currency }}</p>
                     <div ng-repeat="cbItemOption in cbItem.options | filter:{count:'!0'}" style="clear:both;">
                        <p style="float:left;width:70%;overflow:hidden;white-space:nowrap;text-indent:20px">{{cbItemOption.name[firstLg]}}{{cbItemOption.name[secondLg]}}</p>
                        <p style="float:left;width:30%;overflow:hidden;text-align:right" ng-if="cbItemOption.price>0 || cbItemOption.count >1 ">
                           <span ng-if="cbItemOption.count>1">{{cbItemOption.count}}</span> <span>{{cbItemOption.price | currency}}</span>
                        </p>
                              <div ng-repeat="sub in cbItemOption['suboptions'] | filter:{count:'!0'}" style="clear:both;">
                              <p style="float:left;width:70%;overflow:hidden;white-space:nowrap;text-indent:30px">{{sub.name[firstLg]}}{{sub.name[secondLg]}}</p>
                              <p style="float:left;width:30%;overflow:hidden;text-align:right" ng-if="sub.price>0 || cbItemOption.count >1 ">
                                 <span ng-if="cbItemOption.count>1">{{sub.count}}</span> &#215; <span>{{sub.price | currency}}</span>
                              </p>

                           </div>
                     </div>
                  </div>
               </div>
               <div ng-repeat="option in item.option | filter:{count:'!0'}" ng-if="item.option.length>=1" style="text-align:left;color:#8B0000;clear:both">
                  <p style="float:left;width:69%;overflow:hidden;text-indent:20px">{{option.name[firstLg]}} {{option.name[secondLg]}}</p>
                  <p style="float:right;width:30%;text-align:right;overflow:hidden;" ng-if="option.price>0 || option.count>1"><span ng-if="option.count>1">{{option.count}} &#215; </span>{{option.price | currency}}&nbsp;</p>
                  <div ng-repeat="sub in option['suboptions'] | filter:{count:'!0'}" ng-if="option['suboptions'].length>=1" style="text-align:left;color:#8B0000;clear:both">
                              <p style="float:left;width:69%;overflow:hidden;text-indent:25px">{{sub.name[firstLg]}} {{sub.name[secondLg]}}</p>
                        <p style="float:right;width:30%;text-align:right;overflow:hidden;" ng-if="option.price>0 || option.count>1"><span ng-if="sub.count>1">&nbsp;&nbsp;{{sub.count}} &#215;</span>{{sub.price | currency}}&nbsp;</p>
                  </div>
               </div>
            </div>
            <div ng-class="{'headTable-top':!$first}"  style="display:table-cell;width:20%;text-align:right">{{item.ttprice | currency}}&nbsp;</div>
         </div>
      </div>
   </ion-scroll>
   <div style="display:table;position:absolute;bottom:0;height:20%;z-index:999;width:100%;" class="headerSize">
      <div style="display:table;
         border-left:solid #E3DAC9  1px;border-right:solid #E3DAC9  1px;
         width:95%;margin-left:2.5%;vertical-align:middle;">
         <div style="display:table-row;height:65px;vertical-align:middle;">
            <div style="display:table-cell;height:65px;border-top:solid #E3DAC9 1px;border-bottom:solid #E3DAC9 1px;position:relative;font-weight:900;width:33%;
               ">
               <div style="padding-top:5px">Subtotal</div>
               <div style="background:#FFCD34;color:#fff;height:30px;position:absolute;bottom:0;width:100%;line-height:30px;">{{receipt.subTotal | currency}}</div>
            </div>
            <div style="display:table-cell;border-left:solid #E3DAC9 1px;border-right:solid #E3DAC9 1px">&nbsp;</div>
            <div style="display:table-cell;height:65px;border-top:solid #E3DAC9 1px;border-bottom:solid #E3DAC9 1px;position:relative;font-weight:900;width:33%;
               ">
               <span>Charge Fee</span>
               <div style="background:#FFCD34;color:#fff;height:30px;position:absolute;bottom:0;width:100%;line-height:30px;">{{receipt.charge | currency}}</div>
            </div>
            <div style="display:table-cell;border-left:solid #E3DAC9 1px;border-right:solid #E3DAC9 1px">&nbsp;</div>
            <div style="display:table-cell;height:65px;border-top:solid #E3DAC9 1px;border-bottom:solid #E3DAC9 1px;position:relative;font-weight:900;width:34%;
               ">
               <span style="margin-top:15px;">Discount</span>
               <div style="background:#FFCD34;color:#fff;height:30px;position:absolute;bottom:0;width:100%;line-height:30px;">{{receipt.discount | currency}}</div>
            </div>
         </div>
      </div>
      <div style="display:table;margin:10px;
         border-left:solid #E3DAC9  1px;border-right:solid #E3DAC9  1px;
         width:95%;margin-left:2.5%;vertical-align:middle;">
         <div style="display:table-row;height:65px;vertical-align:middle;">
            <div style="display:table-cell;height:65px;border-top:solid #E3DAC9 1px;border-bottom:solid #E3DAC9 1px;position:relative;font-weight:900;width:33%;
               ">
               <div style="padding-top:5px">Tax</div>
               <div style="background:#FFCD34;color:#fff;height:30px;position:absolute;bottom:0;width:100%;line-height:30px;">
                  {{receipt.taxTotal | currency}}
               </div>
            </div>
            <div style="display:table-cell;border-left:solid #E3DAC9 1px;border-right:solid #E3DAC9 1px">&nbsp;</div>
            <div style="display:table-cell;height:65px;border-top:solid #E3DAC9 1px;border-bottom:solid #E3DAC9 1px;position:relative;font-weight:900;width:33%;
               ">
               <span style="margin-top:15px;">Tips<span>
               <div style="background:#FFCD34;color:#fff;height:30px;line-height:30px;position:absolute;bottom:0;width:100%">
                  {{receipt.orderTips | currency}}
               </div>
            </div>
            <div style="display:table-cell;border-left:solid #E3DAC9 1px;border-right:solid #E3DAC9 1px">&nbsp;</div>
            <div style="vertical-align:middle;display:table-cell;height:55px;border-top:solid #E3DAC9 1px;border-bottom:solid #E3DAC9 1px;position:relative;font-size:1.6em;font-weight:900;width:34%;
               "><span style="margin-top:15px;">{{receipt.total | currency}}<span>
            </div>
         </div>
      </div>
   </div>
</ion-view>