webpackJsonp([10],{PmDO:function(e,t){},"YE/s":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=s("lC5x"),i=s.n(o),a=s("rVsN"),r=s.n(a),c=s("J0Oq"),n=s.n(c),l=s("JahA"),d=s("WVI2"),h=(s("pfH6"),s("Nxqm")),u=s("P8AZ"),p={components:{ColorPicker:d.a,ImageUploadWithPreview:h.a,commonDialog:u.a},data:function(){return{responseMsg:"",id:this.$route.params.itemId||"",groupName:this.$route.query?this.$route.query.groupName:"",groupId:this.$route.query?this.$route.query.groupId:"",categoryId:this.$route.params?this.$route.params.categoryId:"",menuId:this.$route.query?this.$route.query.menuId:"",isGlobalOption:!!this.$route.query&&this.$route.query.isGlobalOption,isShowColor:!1,isOption:!1,thumbPath:"",colors:"7DBFE2",isShowPic:!1,name:"",shortName:"",posName:"",price:"",sendToKitchenRequired:!1,printerList:[],printerIds:[],searchType:this.$route.query.searchType||"",searchWord:this.$route.query.searchWord||"",referrer:this.$route.query.from||""}},mounted:function(){var e,t=(e=n()(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.a.all([s.$$fetch_item_getAllPrinters()]);case 2:t=e.sent,s.printerList=t[0].printerList,s.getOptionDetail();case 5:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)}),s=this;t()},computed:{language:function(){return this.$store.state.language}},methods:{cancel:function(){this.isShowPic=!1},updatePic:function(e){this.thumbPath=e},onAddImagePath:function(){this.isShowPic=!1},historyBack:function(){"group"===this.referrer?this.searchType||this.searchWord?this.$router.push({path:this.$route.query.hash,query:this.$route.query}):this.$router.go(-1):"menu"===this.referrer?this.searchType||this.searchWord?this.$router.push({name:"restaurantMenu",params:{searchType:this.searchType,searchWord:this.searchWord}}):this.$router.go(-1):this.$router.push({path:"/itemList/"+this.categoryId,query:this.$route.query})},checkPrice:function(){var e=event.target.value;(46!==event.keyCode&&event.keyCode<48||event.keyCode>57||e.indexOf(".")>-1&&46===event.keyCode||"0"===e&&48===event.keyCode||0===e.length&&46===event.keyCode||/\d?\.(\d){2,}/g.test(e))&&(event.returnValue=!1)},save:function(){var e=this,t={};t.menuCategoryId=this.categoryId,t.groupId=this.groupId,t.name=this.name,t.posName=""===this.posName?this.posName=this.name.substr(0,20):this.posName.substr(0,20),t.shortName=this.shortName,t.color=this.colors,t.price=this.price||"0",t.thumbPath=this.thumbPath,t.sendToKitchenRequired=this.sendToKitchenRequired,t.printerIds=this.printerList.filter(function(e){return e.checked}).map(function(e){return e.id}),t.sendToKitchenRequired||(t.printerIds=[]),"New"===this.id?this.$$fetch_item_addGlobalOption({data:t}).then(function(t){t&&t.globalOption&&(e.id=t.globalOption.id,e.getOptionDetail(),e.$router.push({path:e.$route.path.replace("New",e.id),query:e.$route.query}),e.$refs.successCategotyDialog.show())},function(t){e.responseMsg=t.error.msg,e.$refs.responseDialog.show()}):this.id&&(t.id=this.id,this.$$fetch_item_editGlobalOption({data:t}).then(function(t){t&&t.globalOption&&(e.getOptionDetail(),e.$refs.successCategotyDialog.show())},function(t){e.responseMsg=t.error.msg,e.$refs.responseDialog.show()}))},imgClick:function(){this.isShowPic=!0,this.$refs.uploadImage.show()},createNew:function(){this.$router.push({path:"/globaloption/"+this.categoryId+"/New",query:this.$route.query}),this.$router.go(0)},getOptionDetail:function(){var e=this;"New"!==this.id&&this.$$fetch_item_getGlobalOption({opts:{afterData:this.id,getTpye:"afterUrl"}}).then(function(t){t&&t.globalOption&&(t.globalOption.fieldDisplayNameGroups&&t.globalOption.fieldDisplayNameGroups.length>0&&t.globalOption.fieldDisplayNameGroups.forEach(function(e){t.globalOption=l.a.getObjLangField(e.fieldName,e.fieldDisplayNames,t.globalOption,"en")}),e.colors=t.globalOption.color||"7dbfe2",e.name=t.globalOption.name||"",e.posName=t.globalOption.posName||"",e.thumbPath=t.globalOption.thumbPath||"",e.shortName=t.globalOption.shortName||"",e.sendToKitchenRequired=t.globalOption.sendToKitchenRequired||!1,e.price=t.globalOption.price+"",e.printerIds=t.globalOption.printerIds||[],e.printerList.forEach(function(t){e.printerIds.forEach(function(e){e===t.id&&(t.checked=!0)})}),e.sendToKitchenRequired=e.printerIds.length>0)})}}},m={render:function(){var e=this,t=this,s=t.$createElement,o=t._self._c||s;return o("mdc-layout-app",{staticClass:"categoryContent"},[o("mdc-toolbar",{staticClass:"blackheader",attrs:{slot:"toolbar"},slot:"toolbar"},[o("mdc-headline",[o("span",{on:{click:t.historyBack}},[o("mdc-icon",{attrs:{icon:"keyboard_arrow_left"}})],1),t._v(t._s(t.$t("fields.backToCategory"))+" : Global Option\r\n    ")])],1),t._v(" "),o("form",{on:{submit:function(e){e.preventDefault()}}},[o("main",{staticClass:"panel"},[o("section",{staticClass:"sectionPanel baseInfo"},[o("mdc-layout-grid",[o("mdc-layout-cell",{attrs:{desktop:"12",tablet:"8",phone:"4"}},[o("mdc-title",[t._v(t._s(t.$t("fields.name")))])],1),t._v(" "),o("mdc-layout-cell",{attrs:{desktop:"3"}},[o("mdc-textfield",{attrs:{label:t.$t("fields.name"),required:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),t._v(" "),o("mdc-layout-cell",{attrs:{desktop:"3"}},[o("mdc-textfield",{attrs:{label:"POS Name",maxlength:"20"},model:{value:t.posName,callback:function(e){t.posName=e},expression:"posName"}})],1),t._v(" "),o("mdc-layout-cell",{attrs:{desktop:"3"}},[o("mdc-textfield",{attrs:{label:t.$t("fields.kitchenName")},model:{value:t.shortName,callback:function(e){t.shortName=e},expression:"shortName"}})],1),t._v(" "),o("mdc-layout-cell",{attrs:{desktop:"3"}},[o("div",{staticClass:"re"},[o("color-picker",{attrs:{color:t.colors,isShow:t.isShowColor},on:{"update:color":function(s){t.colors=s.color,e.colors=s.color,e.isShowColor=s.isShow}}})],1)])],1)],1),t._v(" "),o("section",{staticClass:"sectionPanel"},[o("mdc-layout-grid",[o("mdc-layout-cell",{attrs:{desktop:"12",tablet:"8",phone:"4"}},[o("mdc-title",[t._v(t._s(t.$t("fields.price")))])],1),t._v(" "),o("mdc-layout-cell",{attrs:{desktop:"3",tablet:"8",phone:"4"}},[o("mdc-textfield",{attrs:{label:t.$t("fields.defaultPrice")},on:{keypress:t.checkPrice,blur:function(e){t.price=/(^-?[1-9](\d+)?(\.\d{1,2})?$)|(^-?0$)|(^-?\d\.\d{1,2}$)/.test(t.price)?t.price:""}},model:{value:t.price,callback:function(e){t.price=e},expression:"price"}})],1)],1)],1),t._v(" "),o("section",{staticClass:"sectionPanel"},[o("mdc-layout-grid",[o("mdc-layout-cell",{attrs:{desktop:"12",tablet:"8",phone:"4"}},[o("mdc-checkbox",{attrs:{label:t.$t("fields.sendToKitchenRequired")},model:{value:t.sendToKitchenRequired,callback:function(e){t.sendToKitchenRequired=e},expression:"sendToKitchenRequired"}})],1),t._v(" "),t.sendToKitchenRequired?o("mdc-layout-cell",{staticClass:"checkedBox",staticStyle:{height:"auto"},attrs:{desktop:"12"}},t._l(t.printerList,function(e,s){return o("label",{key:s,staticClass:"fp20"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.checked,expression:"printer.checked"}],attrs:{type:"checkbox","data-printername":e.name},domProps:{value:e.id,checked:Array.isArray(e.checked)?t._i(e.checked,e.id)>-1:e.checked},on:{change:function(s){var o=e.checked,i=s.target,a=!!i.checked;if(Array.isArray(o)){var r=e.id,c=t._i(o,r);i.checked?c<0&&t.$set(e,"checked",o.concat([r])):c>-1&&t.$set(e,"checked",o.slice(0,c).concat(o.slice(c+1)))}else t.$set(e,"checked",a)}}})])})):t._e()],1)],1),t._v(" "),o("section",{staticClass:"sectionPanel baseInfo"},[o("img",{staticClass:"itemImg",attrs:{src:t.thumbPath?t.GLOBAL.imgPath+t.thumbPath:t.GLOBAL.defaultImg},on:{click:t.imgClick}})])])]),t._v(" "),o("footer",{staticClass:"whitefooter"},[o("div",{staticClass:"mdl-mini-footer__right-section"},[o("mdc-button",{on:{click:t.historyBack}},[t._v(t._s(t.$t("btns.cancel")))]),t._v(" "),o("mdc-button",{staticClass:"btnColor",attrs:{disabled:""===t.name.replace(/\s/g,"")},on:{click:t.save}},[t._v(t._s(t.$t("btns.save")))])],1)]),t._v(" "),o("section",{staticClass:"success-dialog successCategoty"},[o("commonDialog",{ref:"successCategotyDialog",attrs:{title:t.$t("fields.successSaved"),accept:t.$t("fields.creatAnother"),receive:t.$t("fields.backToList"),cancel:t.$t("btns.ok")},on:{accept:function(){t.createNew()},receive:function(){t.historyBack()}}})],1),t._v(" "),o("section",[o("mdc-dialog",{ref:"responseDialog",staticClass:"responseDialog",attrs:{title:t.responseMsg,accept:"",cancel:t.$t("btns.ok"),"accept-disabled":""}})],1),t._v(" "),o("section",{attrs:{id:"uploadImage"}},[o("mdc-dialog",{ref:"uploadImage",attrs:{title:"Upload Image",accept:"Apply",cancel:"Cancel"},on:{accept:t.onAddImagePath,cancel:t.cancel}},[o("image-upload-with-preview",{attrs:{imgSrc:t.thumbPath,isShowPic:t.isShowPic},on:{updatePic:t.updatePic}})],1)],1)],1)},staticRenderFns:[]};var f=s("vSla")(p,m,!1,function(e){s("PmDO")},null,null);t.default=f.exports}});