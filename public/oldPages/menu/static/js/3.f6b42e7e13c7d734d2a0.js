webpackJsonp([3],{"3xu2":function(t,e){},IHPB:function(t,e,i){"use strict";e.__esModule=!0;var o,s=i("kfHR"),n=(o=s)&&o.__esModule?o:{default:o};e.default=function(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return(0,n.default)(t)}},LpXm:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i("aA9S"),s=i.n(o),n=i("lC5x"),a=i.n(n),r=i("rVsN"),c=i.n(r),l=i("J0Oq"),p=i.n(l),u=i("JahA"),d=i("VbKi"),h=i("WVI2"),m=i("pfH6"),f=i("Nxqm"),v=i("4YfN"),b=i.n(v),g=i("3cXf"),y=i.n(g),O=i("IHPB"),P=i.n(O),x=i("7/G8"),_={data:function(){return{curPage:1,initList:[]}},props:{list:{type:Array,required:!0,default:""},pageSize:{type:Number,required:!0,default:""}},computed:{pageNum:function(){return Math.ceil(this.list.length/this.pageSize)||Math.ceil(this.initList.length/this.pageSize)}},methods:{goPage:function(t){if(0===t)this.curPage=1;else{var e=this.curPage+t;if(!(e>0&&e<=this.pageNum))return;this.curPage=this.curPage+t}var i=(this.curPage-1)*this.pageSize,o=this.curPage*this.pageSize,s=[];s=this.initList&&0!==this.initList.length?this.initList.slice(i,o):this.list.slice(i,o),this.$emit("pageList",s),this.$emit("curPage",this.curPage)}},mounted:function(){this.$on("initPage",function(t){this.initList=t,this.goPage(0)})}},I={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("nav",[i("ul",{staticClass:"pagination"},[i("li",[i("a",{attrs:{href:"javascript:;"}},[i("i",{staticClass:"material-icons",on:{click:function(e){t.goPage(-1)}}},[t._v("navigate_before")])])]),t._v(" "),i("li",[i("span",{directives:[{name:"show",rawName:"v-show",value:t.list.length>0||t.initList.length>0,expression:"list.length>0||initList.length>0"}],staticStyle:{padding:"2px"}},[t._v(t._s(t.curPage)+"/"+t._s(t.pageNum))])]),t._v(" "),i("li",[i("a",{attrs:{href:"javascript:;"}},[i("i",{staticClass:"material-icons",on:{click:function(e){t.goPage(1)}}},[t._v("navigate_next")])])])])])},staticRenderFns:[]};var S=i("vSla")(_,I,!1,function(t){i("3xu2")},"data-v-3f8b2019",null).exports,k={props:{content:{type:String,default:""},placeholder:{type:String,default:""}},computed:{contentString:{get:function(){return this.content},set:function(t){return this.$emit("update:content",t),t}}},methods:{clear:function(){this.$emit("update:content","")},search:function(){var t=this.contentString;this.$emit("searchFn",t)}}},C={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mdl-textfield mdl-js-textfield search_compent"},[i("i",{staticClass:"material-icons left_icon",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.search(e)}}},[t._v("search")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.contentString,expression:"contentString"}],staticClass:"mdl-textfield__input input_contnet",attrs:{placeholder:t.placeholder,type:"text"},domProps:{value:t.contentString},on:{input:function(e){e.target.composing||(t.contentString=e.target.value)}}}),t._v(" "),i("i",{staticClass:"material-icons right_icon",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.clear(e)}}},[t._v("cancel")])])},staticRenderFns:[]};var $=i("vSla")(k,C,!1,function(t){i("cb90")},null,null).exports,w={props:{itemData:{type:Object,required:!0,default:""}}},N={render:function(){var t=this.$createElement,e=this._self._c||t;return e("mdc-layout-grid",{staticClass:"subTable"},[e("mdc-layout-cell",{staticClass:"mlColumn sTitle",attrs:{desktop:"3",tablet:"2",align:"middle"}},[this._v("\n    "+this._s(this.itemData.name)+"\n  ")])],1)},staticRenderFns:[]};var A=i("vSla")(w,N,!1,function(t){i("jAm5")},"data-v-aacd7ce4",null).exports,D=i("2ntA"),L={name:"options",components:{ColorPicker:h.a,CommonSelect:x.a,Pagination:S,SearchInput:$,SuboptionItem:A,Chip:D.a,ImageUploadWithPreview:f.a},props:["options","printerList"],data:function(){return{thumbPath:"",count:0,from:-1,subOptions:[{name:"",shortName:"",price:"",color:"84C3ED",displayPriority:"",thumbPath:"",printerIds:[]}],cleanSubOptions:[{name:"",shortName:"",price:"",color:"84C3ED",displayPriority:"",thumbPath:"",printerIds:[]}],subOption:{name:"",shortName:"",price:"",color:"84C3ED",displayPriority:"",thumbPath:"",printerIds:[]},option:{name:"",shortName:"",price:"",color:"84C3ED",displayPriority:"",numOfItemOptionAllowed:"",thumbPath:"",printerIds:[],subOptions:[]},printer4optionList:[],printer4subOptionList:[],printer4addSubOptionList:[],eventStop:!1,eventAddSubStop:!1,eventSubStop:!1,optionIndex:-1,subOptionIndex:-1,addSubOptionIndex:-1,searchMsg:"",optionPageList:[],itemPageList:[],pageSize:6,optionCurPage:0,itemCurPage:0,printerPageList:[],addBackgroundColor:"rgb(63,81,181)",addButtonColor:"rgb(255, 255, 255)",optionList:[],itemList:[],cleanPrinterList:[],declinedPrinterList:[],addExitOptionFrom:-1}},computed:{computedOptions:{get:function(){var t=this.getOptions(this.options,this.printer4optionList),e=this;return t.forEach(function(t,i){t.subOptions&&t.subOptions.length>0&&(t.subOptions=e.getOptions(t.subOptions,e.printer4subOptionList))}),t},set:function(t){this.$emit("update:options",t)}},computedPrinterList:{get:function(){return this.printerList},set:function(t){this.$emit("update:printerList",t)}}},methods:{watch4checkbox:function(t,e){var i=0;e?(this.count-=1,0===this.count&&(i=2)):(this.count+=1,0===this.count&&(i=1)),console.log(this.count),2===i||this.count===-this.itemPageList[t].options.length?this.itemPageList[t].choose=!1:1!==i&&this.count!==this.itemPageList[t].options.length||(this.itemPageList[t].choose=!0)},allCheck:function(t,e){this.itemPageList[t].options.forEach(function(t,i){t.choose=!e}),this.count=0},getOptions:function(t,e){var i=this,o=[].concat(P()(t));return o.forEach(function(t,o){var s=JSON.parse(y()(i.cleanPrinterList));s.forEach(function(e,i){t.printerIds&&-1!==t.printerIds.indexOf(e.id)&&(e.choose=!0)}),t.printerName||(t.printerName="",s.forEach(function(e,i){t.printerIds&&-1!==t.printerIds.indexOf(e.id)&&(t.printerName=0===t.printerName.length?t.printerName+e.name:t.printerName+","+e.name)})),e[o]=s}),o},onImageClick:function(t,e,i){this.from=e,0===e?(this.thumbPath=this.computedOptions[t].thumbPath,this.optionIndex=t):1===e?(this.thumbPath=this.computedOptions[i].subOptions[t].thumbPath,this.optionIndex=i,this.subOptionIndex=t):2===e&&(this.thumbPath=this.subOptions[t].thumbPath,this.addSubOptionIndex=t),this.$refs.uploadImagePre.$emit("clean"),this.$refs.uploadImage.show()},onClick:function(t,e,i){this.from=e;var o=[];0===e?(o=this.printer4optionList,this.optionIndex=t,this.eventStop=!0):1===e?(o=this.printer4subOptionList,this.optionIndex=i,this.subOptionIndex=t,this.eventSubStop=!0):2===e&&(o=this.printer4addSubOptionList,this.addSubOptionIndex=t,this.eventAddSubStop=!0),o[t]?(this.computedPrinterList=o[t],this.declinedPrinterList=JSON.parse(y()(o[t]))):this.computedPrinterList=JSON.parse(y()(this.cleanPrinterList));var s=this;setTimeout(function(){s.$refs.page.goPage(0)},0),this.$refs.dialog.show()},search:function(t){var e=this;this.$$fetch_item_getExsitOptions({data:{name:t}}).then(function(t){e.optionList=t.options;var i=e;setTimeout(function(){i.$refs.optionPage.goPage(0)},0)})},searchItem4Option:function(t){var e=this;this.$$fetch_item_getOtherOptions({data:{name:t}}).then(function(t){e.itemList=t.items;var i=e;setTimeout(function(){i.$refs.itemPage.goPage(0)},0)})},getOptionPageList:function(t){this.optionPageList=t},getItemPageList:function(t){this.itemPageList=t},onOptionSelect:function(t){if(0===t.index)this.subOptions=JSON.parse(y()(this.cleanSubOptions)),this.$refs.optionDialog.show();else if(1===t.index){var e=JSON.parse(y()(this.options));e.splice(this.optionIndex,1),this.computedOptions=e}},onAddOptionSelect:function(t){if(0===t.index){this.optionList=[];var e=this;setTimeout(function(){e.$refs.optionPage.goPage(0)},0),this.searchMsg="",this.$refs.existOptionDialog.show()}else if(1===t.index){this.itemList=[];var i=this;setTimeout(function(){i.$refs.itemPage.goPage(0)},0),this.searchMsg="",this.$refs.fromOtherOption.show()}else if(2===t.index){var o=JSON.parse(y()(this.options));o.push(b()({},this.option)),this.computedOptions=o}},onAddSubOptionSelect:function(t){if(0===t.index){this.optionList=[];var e=this;setTimeout(function(){e.$refs.optionPage.goPage(0)},0),this.searchMsg="",this.$refs.existOptionDialog.show()}else 1===t.index&&this.subOptions.push(b()({},this.subOption))},onOptionCancel:function(){console.log("menu cancelled")},onSubOptionCancel:function(){console.log("menu cancelled")},cancelExistOption:function(){this.$refs.existOptionDialog.close(),this.addExitOptionFrom&&this.$refs.optionDialog.show()},cancelOtherOption:function(){},applyExistOption:function(){if(0===this.addExitOptionFrom){var t=this.optionList.filter(function(t,e){return!0===t.choose&&(delete t.id,delete t.fieldDisplayNameGroups,t.subOptions&&t.subOptions.length>0&&t.subOptions.forEach(function(t){delete t.id,delete t.fieldDisplayNameGroups})),!0===t.choose});this.computedOptions=this.computedOptions.concat(t)}else if(1===this.addExitOptionFrom){var e=this.optionList.filter(function(t,e){return delete t.id,delete t.saleItemId,!0===t.choose});this.subOptions=this.subOptions.concat(e),this.$refs.optionDialog.show()}this.$refs.existOptionDialog.close()},applyOptionFromOtherOption:function(){var t=[];this.itemList.forEach(function(e,i){e.options&&(t=t.concat(e.options.filter(function(t,e){return delete t.id,!0===t.choose})))}),this.computedOptions=this.computedOptions.concat(t)},setOptionCurPage:function(t){this.optionCurPage=t},setItemCurPage:function(t){this.itemCurPage=t},showOptionMenu:function(t){this.$refs.option[t].show(),this.optionIndex=t},showSubAddMenu:function(){this.$refs.subAdd.show(),this.addExitOptionFrom=1},showAddMenu:function(){this.$refs.add.show(),this.addExitOptionFrom=0},chipChange:function(t,e){e+=this.pageSize*(this.curPage-1),t.choose=!t.choose,this.printerList.splice(e,1,t)},getPageList:function(t){this.printerPageList=t},onAddSubOption:function(){this.printer4subOptionList=[],this.computedOptions[this.optionIndex].subOptions=this.computedOptions[this.optionIndex].subOptions.concat(JSON.parse(y()(this.subOptions))),this.printer4addSubOptionList=[]},onAddImagePath:function(){0===this.from?this.computedOptions[this.optionIndex].thumbPath=this.thumbPath:1===this.from?this.computedOptions[this.optionIndex].subOptions[this.subOptionIndex].thumbPath=this.thumbPath:2===this.from&&(this.subOptions[this.addSubOptionIndex].thumbPath=this.thumbPath)},onAccept:function(){var t=[],e=-1,i=[];0===this.from?(t=this.printer4optionList,e=this.optionIndex,i=this.options,this.eventStop=!1):1===this.from?(t=this.printer4subOptionList,e=this.subOptionIndex,i=this.options[this.optionIndex].subOptions,this.eventSubStop=!1):2===this.from&&(t=this.printer4addSubOptionList,e=this.addSubOptionIndex,i=this.subOptions,this.eventAddSubStop=!1),t[e]=JSON.parse(y()(this.printerList));var o=[],s="";this.printerList.filter(function(t,e){if(!0===t.choose)return o.push(t.id),s=0===s.length?s+t.name:s+","+t.name,t});var n=[].concat(P()(i));n[e].printerName=s,n[e].printerIds=o;var a=[];0===this.from?this.computedOptions=n:1===this.from?((a=[].concat(P()(this.options)))[this.optionIndex].subOptions=n,this.computedOptions=JSON.parse(y()(a))):2===this.from&&(this.subOptions=n)},onDecline:function(){0===this.from?(this.printer4optionList[this.optionIndex]&&(this.printer4optionList[this.optionIndex]=this.declinedPrinterList),this.eventStop=!1):1===this.from?(this.printer4subOptionList[this.subOptionIndex]&&(this.printer4subOptionList[this.subOptionIndex]=this.declinedPrinterList),this.eventSubStop=!1):2===this.from&&(this.printer4addSubOptionList[this.addSubOptionIndex]&&(this.printer4addSubOptionList[this.addSubOptionIndex]=this.declinedPrinterList),this.eventAddSubStop=!1)},setCurPage:function(t){this.curPage=t}},mounted:function(){this.$refs.page.goPage(0),this.cleanPrinterList=this.printerList}},T={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t._l(t.computedOptions,function(e,o){return i("div",{key:o},[i("mdc-layout-grid",[i("mdc-layout-cell",{staticClass:"w2",attrs:{desktop:"2"}},[i("mdc-textfield",{attrs:{required:!0,label:"Option Name"},model:{value:e.name,callback:function(i){t.$set(e,"name",i)},expression:"items.name"}})],1),t._v(" "),i("mdc-layout-cell",{attrs:{desktop:"1"}},[i("mdc-textfield",{attrs:{required:!0,label:"Kitchen Name"},model:{value:e.shortName,callback:function(i){t.$set(e,"shortName",i)},expression:"items.shortName"}})],1),t._v(" "),i("mdc-layout-cell",{attrs:{desktop:"1"}},[i("mdc-textfield",{attrs:{required:!0,label:"Price"},model:{value:void 0===e.price?e.price="":e.price,callback:function(i){t.$set(void 0===e.price?e.price="":e,"price",i)},expression:"items.price===undefined?items.price='':items.price"}})],1),t._v(" "),i("mdc-layout-cell",{attrs:{desktop:"1",align:"bottom"}},[i("color-picker",{attrs:{colors:e.color},on:{"update:colors":function(t){return e.color=t}}})],1),t._v(" "),i("mdc-layout-cell",{attrs:{desktop:"1"}},[i("mdc-textfield",{attrs:{required:!0,label:"Display Sequence"},model:{value:void 0===e.displayPriority?e.displayPriority="":e.displayPriority,callback:function(i){t.$set(void 0===e.displayPriority?e.displayPriority="":e,"displayPriority",i)},expression:"items.displayPriority===undefined?items.displayPriority='':items.displayPriority"}})],1),t._v(" "),i("mdc-layout-cell",{attrs:{desktop:"1"}},[i("mdc-textfield",{attrs:{label:"Maximum Selection"},model:{value:void 0===e.numOfItemOptionAllowed?e.numOfItemOptionAllowed="":e.numOfItemOptionAllowed,callback:function(i){t.$set(void 0===e.numOfItemOptionAllowed?e.numOfItemOptionAllowed="":e,"numOfItemOptionAllowed",i)},expression:"items.numOfItemOptionAllowed===undefined?items.numOfItemOptionAllowed='':items.numOfItemOptionAllowed"}})],1),t._v(" "),i("mdc-layout-cell",{attrs:{desktop:"2"}},[i("mdc-textfield",{staticClass:"w2",attrs:{label:"Option's Specific Printers",disabled:t.eventStop},on:{click:function(e){t.onClick(o,0)}},model:{value:void 0===e.printerName?e.printerName="":e.printerName,callback:function(i){t.$set(void 0===e.printerName?e.printerName="":e,"printerName",i)},expression:"items.printerName===undefined?items.printerName='':items.printerName"}})],1),t._v(" "),i("mdc-layout-cell",{attrs:{desktop:"2"}},[i("mdc-textfield",{staticClass:"w2",attrs:{label:"Image"},on:{click:function(e){t.onImageClick(o,0)}},model:{value:e.thumbPath,callback:function(i){t.$set(e,"thumbPath",i)},expression:"items.thumbPath"}})],1),t._v(" "),i("mdc-layout-cell",{staticClass:"priceMenu",attrs:{desktop:"1",align:"bottom"}},[i("mdc-menu-anchor",[i("mdc-button",{attrs:{raised:""},on:{click:function(e){t.showOptionMenu(o)}}},[i("i",{staticClass:"material-icons"},[t._v("brightness_low")])]),t._v(" "),i("mdc-menu",{ref:"option",refInFor:!0,on:{select:t.onOptionSelect,cancel:t.onOptionCancel}},[i("mdc-menu-item",[t._v("Add option's option")]),t._v(" "),i("mdc-menu-item",[t._v("Delete")])],1)],1)],1)],1),t._v(" "),t._l(e.subOptions,function(e,s){return i("mdc-layout-grid",{key:s},[i("mdc-layout-cell",{attrs:{desktop:"1"}},[i("div",{staticStyle:{position:"relative",top:"50%"}},[t._v("Sub-Option:")])]),t._v(" "),i("mdc-layout-cell",{attrs:{desktop:"1"}},[i("mdc-textfield",{attrs:{required:!0,label:"Option's option"},model:{value:e.name,callback:function(i){t.$set(e,"name",i)},expression:"sitem.name"}})],1),t._v(" "),i("mdc-layout-cell",{attrs:{desktop:"1"}},[i("mdc-textfield",{attrs:{required:!0,label:"Kitchen Name"},model:{value:e.shortName,callback:function(i){t.$set(e,"shortName",i)},expression:"sitem.shortName"}})],1),t._v(" "),i("mdc-layout-cell",{attrs:{desktop:"1"}},[i("mdc-textfield",{attrs:{required:!0,label:"Price"},model:{value:void 0===e.price?e.price="":e.price,callback:function(i){t.$set(void 0===e.price?e.price="":e,"price",i)},expression:"sitem.price===undefined?sitem.price='':sitem.price"}})],1),t._v(" "),i("mdc-layout-cell",{attrs:{desktop:"1",align:"bottom"}},[i("color-picker",{attrs:{colors:e.color},on:{"update:colors":function(t){return e.color=t}}})],1),t._v(" "),i("mdc-layout-cell",{attrs:{desktop:"1"}},[i("mdc-textfield",{attrs:{required:!0,label:"Display Sequence"},model:{value:void 0===e.displayPriority?e.displayPriority="":e.displayPriority,callback:function(i){t.$set(void 0===e.displayPriority?e.displayPriority="":e,"displayPriority",i)},expression:"sitem.displayPriority===undefined?sitem.displayPriority='':sitem.displayPriority"}})],1),t._v(" "),i("mdc-layout-cell",{staticClass:"w2",attrs:{desktop:"2",id:"printerInput"}},[i("mdc-textfield",{attrs:{label:"Option's Specific Printers",disabled:t.eventSubStop},on:{click:function(e){t.onClick(s,1,o)}},model:{value:void 0===e.printerName?e.printerName="":e.printerName,callback:function(i){t.$set(void 0===e.printerName?e.printerName="":e,"printerName",i)},expression:"sitem.printerName===undefined?sitem.printerName='':sitem.printerName"}})],1),t._v(" "),i("mdc-layout-cell",{staticClass:"w2",attrs:{desktop:"2"}},[i("mdc-textfield",{attrs:{label:"Image"},on:{click:function(e){t.onImageClick(s,1,o)}},model:{value:e.thumbPath,callback:function(i){t.$set(e,"thumbPath",i)},expression:"sitem.thumbPath"}})],1)],1)})],2)}),t._v(" "),i("mdc-layout-grid",{staticClass:"circular"},[i("mdc-layout-cell",{attrs:{desktop:"12",align:"bottom"}},[i("mdc-menu-anchor",[i("mdc-button",{attrs:{raised:""},on:{click:t.showAddMenu}},[i("i",{staticClass:"material-icons"},[t._v("add")])]),t._v(" "),i("mdc-menu",{ref:"add",on:{select:t.onAddOptionSelect,cancel:t.onOptionCancel}},[i("mdc-menu-item",[t._v("Select from exising options")]),t._v(" "),i("mdc-menu-item",[t._v("Copy option(s) from other item")]),t._v(" "),i("mdc-menu-item",[t._v("Create New Option")])],1)],1)],1)],1),t._v(" "),i("section",{attrs:{id:"option4option"}},[i("mdc-dialog",{ref:"optionDialog",attrs:{title:"Select specific printers for this option",accept:"Apply",cancel:"Cancel"},on:{accept:t.onAddSubOption,cancel:function(t){}}},[i("div",{staticStyle:{"overflow-y":"auto","max-height":"400px"}},t._l(t.subOptions,function(e,o){return i("mdc-layout-grid",{key:o,staticClass:"optionContent"},[i("mdc-layout-cell",{attrs:{desktop:"3"}},[i("mdc-textfield",{attrs:{required:!0,label:"Option's option Name"},model:{value:e.name,callback:function(i){t.$set(e,"name",i)},expression:"item.name"}})],1),t._v(" "),i("mdc-layout-cell",{attrs:{desktop:"3"}},[i("mdc-textfield",{attrs:{required:!0,label:"Kitchen Name"},model:{value:e.shortName,callback:function(i){t.$set(e,"shortName",i)},expression:"item.shortName"}})],1),t._v(" "),i("mdc-layout-cell",{attrs:{desktop:"3"}},[i("mdc-textfield",{attrs:{required:!0,label:"Price"},model:{value:void 0===e.price?e.price="":e.price,callback:function(i){t.$set(void 0===e.price?e.price="":e,"price",i)},expression:"item.price===undefined?item.price='':item.price"}})],1),t._v(" "),i("mdc-layout-cell",{attrs:{desktop:"3"}},[i("mdc-textfield",{attrs:{required:!0,label:"Display Sequence"},model:{value:void 0===e.displayPriority?e.displayPriority="":e.displayPriority,callback:function(i){t.$set(void 0===e.displayPriority?e.displayPriority="":e,"displayPriority",i)},expression:"item.displayPriority===undefined?item.displayPriority='':item.displayPriority"}})],1),t._v(" "),i("mdc-layout-cell",{attrs:{desktop:"3",align:"bottom"}},[i("color-picker",{attrs:{colors:e.color},on:{"update:colors":function(t){return e.color=t}}})],1),t._v(" "),i("mdc-layout-cell",{attrs:{desktop:"3"}},[i("mdc-textfield",{attrs:{label:"Option's Specific Printers",disabled:t.eventAddSubStop},on:{click:function(e){t.onClick(o,2)}},model:{value:void 0===e.printerName?e.printerName="":e.printerName,callback:function(i){t.$set(void 0===e.printerName?e.printerName="":e,"printerName",i)},expression:"item.printerName===undefined?item.printerName='':item.printerName"}})],1),t._v(" "),i("mdc-layout-cell",{attrs:{desktop:"3"}},[i("mdc-textfield",{attrs:{label:"Image"},on:{click:function(e){t.onImageClick(o,2)}},model:{value:void 0===e.thumbPath?e.thumbPath="":e.thumbPath,callback:function(i){t.$set(void 0===e.thumbPath?e.thumbPath="":e,"thumbPath",i)},expression:"item.thumbPath===undefined?item.thumbPath='':item.thumbPath"}})],1)],1)})),t._v(" "),i("mdc-layout-grid",{staticClass:"circular",attrs:{id:"optionContent-3"}},[i("mdc-layout-cell",{attrs:{desktop:"12",align:"bottom"}},[i("mdc-menu-anchor",[i("mdc-button",{attrs:{raised:""},on:{click:t.showSubAddMenu}},[i("i",{staticClass:"material-icons"},[t._v("add")])]),t._v(" "),i("mdc-menu",{ref:"subAdd",on:{select:t.onAddSubOptionSelect,cancel:t.onSubOptionCancel}},[i("mdc-menu-item",[t._v("Select from exising options")]),t._v(" "),i("mdc-menu-item",[t._v("Create New Option")])],1)],1)],1)],1)],1)],1),t._v(" "),i("section",{attrs:{id:"uploadImage"}},[i("mdc-dialog",{ref:"uploadImage",attrs:{title:"Select specific printers for this option",accept:"Apply",cancel:"Cancel"},on:{accept:t.onAddImagePath,cancel:function(t){}}},[i("image-upload-with-preview",{ref:"uploadImagePre",attrs:{imgSrc:t.thumbPath},on:{"update:imgSrc":function(e){return t.thumbPath=e}}})],1)],1),t._v(" "),i("section",{attrs:{id:"existOption"}},[i("mdc-dialog",{ref:"existOptionDialog",attrs:{title:"Select from exising options",accept:"Apply",cancel:"Cancel"},on:{accept:t.applyExistOption,cancel:t.cancelExistOption}},[i("mdc-layout-grid",[i("mdc-layout-cell",{attrs:{desktop:"12"}},[i("search-input",{attrs:{content:t.searchMsg,placeholder:"Search By Option(s)"},on:{"update:content":function(e){return t.searchMsg=e},searchFn:t.search}})],1)],1),t._v(" "),i("div",{staticStyle:{"overflow-y":"auto",height:"400px"}},t._l(t.optionPageList,function(e,o){return i("div",{key:e.id},[i("mdc-layout-grid",[i("div",{staticClass:"checkColumn"},[i("mdc-checkbox",{model:{value:e.choose,callback:function(i){t.$set(e,"choose",i)},expression:"item.choose"}})],1),t._v(" "),i("mdc-layout-cell",{staticClass:"mlColumn",attrs:{desktop:"3",tablet:"2",align:"middle"}},[t._v("\n              "+t._s(e.name)+"\n            ")])],1),t._v(" "),t._l(e.subOptions,function(t){return i("suboption-item",{key:t.id,attrs:{itemData:t}})})],2)})),t._v(" "),i("mdc-layout-grid",{staticStyle:{height:"0px",padding:"0px 24px"}},[i("mdc-layout-cell",{attrs:{desktop:"12"}},[i("pagination",{ref:"optionPage",attrs:{list:t.optionList,pageSize:4},on:{curPage:t.setOptionCurPage,pageList:t.getOptionPageList}})],1)],1)],1)],1),t._v(" "),i("section",{attrs:{id:""}},[i("mdc-dialog",{ref:"fromOtherOption",attrs:{title:"Copy options from other Item",accept:"Apply",cancel:"Cancel"},on:{accept:t.applyOptionFromOtherOption,cancel:t.cancelOtherOption}},[i("mdc-layout-grid",[i("mdc-layout-cell",{attrs:{desktop:"12"}},[i("search-input",{attrs:{content:t.searchMsg,placeholder:"Search By Item Name"},on:{"update:content":function(e){return t.searchMsg=e},searchFn:t.searchItem4Option}})],1)],1),t._v(" "),i("div",{staticStyle:{"overflow-y":"auto",height:"400px"}},t._l(t.itemPageList,function(e,o){return i("div",{key:e.id},[i("mdc-layout-grid",[i("div",{staticClass:"checkColumn"},[i("mdc-checkbox",{nativeOn:{click:function(i){t.allCheck(o,e.choose)}},model:{value:e.choose,callback:function(i){t.$set(e,"choose",i)},expression:"item.choose"}})],1),t._v(" "),i("mdc-layout-cell",{staticClass:"mlColumn",attrs:{desktop:"3",tablet:"2",align:"middle"}},[t._v("\n              "+t._s(e.name)+"\n            ")])],1),t._v(" "),t._l(e.options,function(e){return i("div",{key:e.id,staticStyle:{padding:"0px 50px"}},[i("mdc-layout-grid",[i("div",{staticClass:"checkColumn"},[i("mdc-checkbox",{nativeOn:{click:function(i){t.watch4checkbox(o,e.choose)}},model:{value:e.choose,callback:function(i){t.$set(e,"choose",i)},expression:"items.choose"}})],1),t._v(" "),i("mdc-layout-cell",{staticClass:"mlColumn",attrs:{desktop:"3",tablet:"2",align:"middle"}},[t._v("\n                "+t._s(e.name)+"\n              ")])],1),t._v(" "),t._l(e.subOptions,function(t){return i("suboption-item",{key:t.id,attrs:{itemData:t}})})],2)})],2)})),t._v(" "),i("mdc-layout-grid",{staticStyle:{height:"0px",padding:"0px 24px"}},[i("mdc-layout-cell",{attrs:{desktop:"12"}},[i("pagination",{ref:"itemPage",attrs:{list:t.itemList,pageSize:4},on:{curPage:t.setItemCurPage,pageList:t.getItemPageList}})],1)],1)],1)],1),t._v(" "),i("section",{attrs:{id:"itemPrinter"}},[i("mdc-dialog",{ref:"dialog",attrs:{title:"Select specific printers for this option",accept:"Apply",cancel:"Cancel"},on:{accept:t.onAccept,cancel:t.onDecline}},[i("mdc-layout-grid",{attrs:{id:"printerContent"}},t._l(t.printerPageList,function(e,o){return i("mdc-layout-cell",{key:e.id,attrs:{desktop:"3"}},[i("chip",{attrs:{name:e.name,isChoose:e.choose},on:{change:function(i){t.chipChange(e,o)}}})],1)})),t._v(" "),i("mdc-layout-grid",[i("mdc-layout-cell",{attrs:{desktop:"12"}},[i("pagination",{ref:"page",attrs:{list:t.computedPrinterList,pageSize:t.pageSize},on:{curPage:t.setCurPage,pageList:t.getPageList}})],1)],1)],1)],1)],2)},staticRenderFns:[]};var q=i("vSla")(L,T,!1,function(t){i("V1C7")},"data-v-ce191be8",null).exports,B=i("Ohtz"),E=i("P8AZ"),F={components:{ColorPicker:h.a,ImageUploadWithPreview:f.a,Options:q,menuOption:B.a,commonDialog:E.a,Bubble:d.a},data:function(){return{responseMsg:"",id:this.$route.params.categoryId||"",groupName:this.$route.query?this.$route.query.groupName:"",isHibachi:!1,isCourse:!1,courseList:[],courseId:-1,isTax:this.$route.query.taxArry||!1,taxList:[],isShowColor:!1,isOption:!1,item:{numOfItemOptionAllowed:"",optionFullScreen:!1,options:[]},catOptions:[{name:"",shortName:"",price:"",color:"84C3ED",displayPriority:"",numOfItemOptionAllowed:"",thumbPath:"",printerIds:[],subOptions:[]},{name:"",shortName:"",price:"",color:"84C3ED",displayPriority:"",numOfItemOptionAllowed:"",thumbPath:"",printerIds:[],subOptions:[]}],printerList:[],isDiscount:!1,discountApplicable:!0,applicableForOrderDiscount:!0,applicableToTriggerPromotion:!0,isReport:!1,reportGroupId:"",reportGroupList:[],thumbPath:"",colors:"7DBFE2",isShowPic:!1,categoryData:{menuId:this.$route.query.menuId||"",groupId:this.$route.params.groupId||"",name:"",displayPriority:"",description:"",shortName:"",posName:"",color:this.GLOBAL.color,requireCategory:!1,optionFullScreen:!1,options:[],quantityZeroRated:0},searchType:this.$route.query.searchType||"",searchWord:this.$route.query.searchWord||"",referrer:this.$route.query.from||"",isSaving:!1}},mounted:function(){var t,e=(t=p()(a.a.mark(function t(){var e,o;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.all([i.$$fetch_common_course(),i.$$fetch_item_getAllPrinters(),i.$$fetch_common_companyTax()]);case 2:e=t.sent,i.courseList=e[0].courseList,i.printerList=e[1].printerList,m.a.printers=i.printerList,i.printerList.forEach(function(t){t.choose=!1,m.a.showName["P"+t.id]=t.name}),i.taxList=e[2].companyTaxList,i.taxList.forEach(function(t){return t.choose=!1}),(o=i.$route.query.taxArry)&&i.taxList.forEach(function(t){o.indexOf(t.id)>-1&&(t.choose=!0)}),"new"!==i.id&&i.getCategoryDetail();case 12:case"end":return t.stop()}},t,this)})),function(){return t.apply(this,arguments)});"new"===this.$route.params.categoryId&&(this.$route.query.discountApplicable||this.$route.query.orderDiscount||this.$route.query.triggerPromotion)&&(this.discountApplicable="true"===this.$route.query.discountApplicable,this.applicableForOrderDiscount="true"===this.$route.query.orderDiscount,this.applicableToTriggerPromotion="true"===this.$route.query.triggerPromotion,this.discountApplicable||this.applicableForOrderDiscount||this.applicableToTriggerPromotion?this.isDiscount=!0:(this.discountApplicable=!0,this.applicableForOrderDiscount=!0,this.applicableToTriggerPromotion=!0,this.isDiscount=!1));var i=this;e()},computed:{language:function(){return this.$store.state.language}},methods:{cancel:function(){this.isShowPic=!1},updatePic:function(t){this.thumbPath=t},onAddImagePath:function(){this.categoryData.thumbPath=this.thumbPath,this.isShowPic=!1},historyBack:function(){if("group"===this.referrer)if(this.searchType||this.searchWord){var t=this.$route.query;this.$router.push({path:this.$route.query.hash,query:t})}else this.$router.go(-1);else"menu"===this.referrer?this.searchType||this.searchWord?this.$router.push({name:"restaurantMenu",params:{searchType:this.searchType,searchWord:this.searchWord}}):this.$router.go(-1):this.$router.push({path:"/groupList/"+this.categoryData.menuId,query:s()(this.$route.query,{groupId:this.categoryData.groupId})})},checkPrice:function(){var t=event.target.value;(46!==event.keyCode&&event.keyCode<48||event.keyCode>57||t.indexOf(".")>-1&&46===event.keyCode||"0"===t&&48===event.keyCode||0===t.length&&46===event.keyCode||/\d?\.(\d){2,}/g.test(t))&&(event.returnValue=!1)},updatePrinterList:function(t){this.printerList=t},updateOptions:function(t){this.catOptions=t},save:function(){var t=this,e={};if((e=this.categoryData).posName=""===this.categoryData.posName?this.categoryData.name.substr(0,15):this.categoryData.posName.substr(0,15),e.categoryType=this.isHibachi?"HIBACHI":"DEFAULT",this.isCourse&&(e.courseId=this.courseId),this.isTax){var i=[];this.taxList.forEach(function(t){t.choose&&i.push(t.id)}),e.qtyQualifyingForZeroRated=this.categoryData.quantityZeroRated||0,e.taxIds=i}this.isOption?(e.options=this.categoryData.options,e.options.forEach(function(t){t.posName=""===t.posName?t.name.substr(0,8):t.posName.substr(0,8),t.subOptions&&t.subOptions.forEach(function(t){t.posName=""===t.posName?t.name.substr(0,8):t.posName.substr(0,8),""===t.price&&(t.price=0)})}),e.numOfItemOptionAllowed=this.categoryData.numOfItemOptionAllowed||"",e.optionFullScreen=this.categoryData.optionFullScreen):(e.options=[],e.optionFullScreen=!1),this.isDiscount?(e.applicableToOrderDiscount=this.applicableForOrderDiscount,e.discountAllowed=this.discountApplicable,e.applicableToTriggerPromotion=this.applicableToTriggerPromotion):(e.applicableToOrderDiscount=!1,e.discountAllowed=!1,e.applicableToTriggerPromotion=!1),e.thumbPath=this.categoryData.thumbPath,e.color=this.colors,this.isSaving=!0,"new"===this.id?this.$$fetch_category_menuCategory({data:e}).then(function(e){if(e&&e.menuCategory){t.id=e.menuCategory.id;var i=t.$route.path.replace("new",e.menuCategory.id);t.$router.push({path:i,query:t.$route.query}),t.$refs.successCategotyDialog.show()}t.isSaving=!1},function(e){t.responseMsg="Item option name cannot be empty"===e.error.msg?t.$t("msg.itemOptionCanntBeEmpty"):e.error.msg,t.$refs.responseDialog.show(),t.isSaving=!1}):this.id&&(e.id=this.id,this.$$fetch_category_updateCategory({data:e}).then(function(e){e&&e.menuCategory&&(t.id=e.menuCategory.id,t.$refs.successCategotyDialog.show()),t.isSaving=!1},function(e){t.responseMsg="Item option name cannot be empty"===e.error.msg?t.$t("msg.itemOptionCanntBeEmpty"):e.error.msg,t.$refs.responseDialog.show(),t.isSaving=!1}))},imgClick:function(){this.thumbPath=this.categoryData.thumbPath||this.thumbPath,this.isShowPic=!0,this.$refs.uploadImage.show()},createNew:function(){var t=this.$route.query;if(t.isDiscount=this.isDiscount,this.isDiscount?(t.discountApplicable=this.discountApplicable,t.orderDiscount=this.applicableForOrderDiscount,t.triggerPromotion=this.applicableToTriggerPromotion):(t.discountApplicable=!1,t.orderDiscount=!1,t.triggerPromotion=!1),this.isTax){var e=[];this.taxList.forEach(function(t){t.choose&&e.push(t.id)}),s()(t,{taxArry:e.join(",")})}else s()(t,{taxArry:""});this.$router.push({path:"/category/"+this.categoryData.groupId+"/new",query:t}),this.$router.go(0)},getCategoryDetail:function(){var t=this,e=this;this.$$fetch_category_getCategory({opts:{afterData:this.id,getTpye:"afterUrl"}}).then(function(i){if(i&&i.menuCategory){var o=i.menuCategory;o.fieldDisplayNameGroups&&o.fieldDisplayNameGroups.length>0&&o.fieldDisplayNameGroups.forEach(function(t){o=u.a.getObjLangField(t.fieldName,t.fieldDisplayNames,o,"en")}),e.categoryData={menuId:o.menuId||(t.$route.query?t.$route.query.menuId:""),groupId:o.groupId||(t.$route.params?t.$route.params.groupId:""),name:o.name||"",displayPriority:o.displayPriority+" ",description:o.description||"",shortName:o.shortName||"",posName:o.posName.substr(0,15)||"",requireCategory:o.requireCategory,color:o.color||"",options:[],thumbPath:o.thumbPath,optionFullScreen:o.optionFullScreen,quantityZeroRated:o.qtyQualifyingForZeroRated||""},e.colors=o.color||"",void 0!==o.options&&o.options.length>0&&(e.categoryData.options=o.options,t.categoryData.options.forEach(function(e){t.isOption=!0,e.price=e.price||"",e.color=e.color||"",e.printerIds=e.printerIds||[],e.numOfItemOptionAllowed=e.numOfItemOptionAllowed||"",e.subOptions&&e.subOptions.forEach(function(t){t.price?t.price=t.price:t.price="0",t.color=t.color||"",t.printerIds=t.printerIds||[]})})),o.courseId&&(e.isCourse=!0,e.courseId=o.courseId+""),"HIBACHI"===o.categoryType&&(t.isHibachi=!0),o.taxIds&&o.taxIds.length>0&&(e.isTax=!0,e.taxList.forEach(function(t){-1!==o.taxIds.indexOf(t.id)&&(t.choose=!0)})),o.options&&o.options.length>0&&(e.isAddOptions=!0,e.catOptions=o.options),(o.discountAllowed||o.applicableToOrderDiscount||o.applicableToTriggerPromotion)&&(e.isDiscount=!0,e.discountApplicable=o.discountAllowed,e.applicableForOrderDiscount=o.applicableToOrderDiscount,e.applicableToTriggerPromotion=o.applicableToTriggerPromotion),e.imgUrl=o.thumbPath||""}})}}},M={render:function(){var t=this,e=this,i=e.$createElement,o=e._self._c||i;return o("mdc-layout-app",{staticClass:"categoryContent"},[o("mdc-toolbar",{staticClass:"blackheader",attrs:{slot:"toolbar"},slot:"toolbar"},[o("mdc-headline",[o("span",{on:{click:e.historyBack}},[o("mdc-icon",{attrs:{icon:"keyboard_arrow_left"}})],1),e._v(e._s(e.$t("fields.backToGroup"))+" : "+e._s(e.groupName)+"\r\n    ")])],1),e._v(" "),o("form",{on:{submit:function(t){t.preventDefault()}}},[o("main",{staticClass:"panel"},[o("section",{staticClass:"sectionPanel baseInfo"},[o("mdc-layout-grid",[o("mdc-layout-cell",{attrs:{desktop:"12",tablet:"8",phone:"4"}},[o("mdc-title",[e._v(e._s(e.$t("fields.name")))])],1),e._v(" "),o("mdc-layout-cell",{attrs:{desktop:"3"}},[o("mdc-textfield",{attrs:{label:e.$t("fields.categoryName"),required:""},model:{value:e.categoryData.name,callback:function(t){e.$set(e.categoryData,"name",t)},expression:"categoryData.name"}})],1),e._v(" "),o("mdc-layout-cell",{attrs:{desktop:"3"}},[o("mdc-textfield",{attrs:{label:e.$t("fields.kitchenName")},model:{value:e.categoryData.shortName,callback:function(t){e.$set(e.categoryData,"shortName",t)},expression:"categoryData.shortName"}})],1),e._v(" "),o("mdc-layout-cell",{attrs:{desktop:"3"}},[o("mdc-textfield",{attrs:{label:e.$t("fields.posName"),maxlength:"15"},model:{value:e.categoryData.posName,callback:function(t){e.$set(e.categoryData,"posName",t)},expression:"categoryData.posName"}})],1),e._v(" "),o("mdc-layout-cell",{attrs:{desktop:"3"}},[o("div",{staticClass:"re"},[o("color-picker",{attrs:{color:e.categoryData.color,isShow:e.isShowColor},on:{"update:color":function(i){e.categoryData.color=i.color,t.colors=i.color,t.isShowColor=i.isShow}}})],1)]),e._v(" "),o("mdc-layout-cell",{attrs:{desktop:"3",align:"bottom"}},[o("mdc-checkbox",{attrs:{label:e.$t("fields.hibachi")},model:{value:e.isHibachi,callback:function(t){e.isHibachi=t},expression:"isHibachi"}})],1),e._v(" "),o("mdc-layout-cell",{attrs:{desktop:"4"}},[o("mdc-textfield",{attrs:{label:e.$t("fields.description")},model:{value:e.categoryData.description,callback:function(t){e.$set(e.categoryData,"description",t)},expression:"categoryData.description"}})],1)],1)],1),e._v(" "),o("section",{staticClass:"sectionPanel partInfo course"},[o("mdc-layout-grid",[o("mdc-layout-cell",{attrs:{desktop:"8"}},[o("mdc-checkbox",{attrs:{label:e.$t("fields.courseAttribute")},model:{value:e.isCourse,callback:function(t){e.isCourse=t},expression:"isCourse"}})],1),e._v(" "),o("mdc-layout-cell",{directives:[{name:"show",rawName:"v-show",value:e.isCourse,expression:"isCourse"}],attrs:{desktop:"4",align:"middle"}},[o("mdc-select",{staticStyle:{width:"100%"},attrs:{label:""},model:{value:e.courseId,callback:function(t){e.courseId=t},expression:"courseId"}},[o("mdc-option",{attrs:{value:"-1"}},[e._v(e._s(e.$t("fields.none")))]),e._v(" "),e._l(e.courseList,function(t){return o("mdc-option",{key:t.id,attrs:{value:t.id+""}},[e._v(e._s(t.name))])})],2)],1)],1)],1),e._v(" "),o("section",{staticClass:"sectionPanel partInfo tax"},[o("mdc-layout-grid",[o("mdc-layout-cell",{attrs:{desktop:"12",tablet:"8",phone:"4"}},[o("mdc-checkbox",{attrs:{label:e.$t("fields.applySalesTax")},model:{value:e.isTax,callback:function(t){e.isTax=t},expression:"isTax"}}),e._v(" "),o("bubble",{attrs:{cssText:"width:300px;word-break:break-all;"}},[o("div",[e._v(e._s(e.$t("tips.salesTax.tip")))])])],1)],1),e._v(" "),o("mdc-layout-grid",{directives:[{name:"show",rawName:"v-show",value:e.isTax,expression:"isTax"}],staticClass:"gridPb"},[e._l(e.taxList,function(t){return o("mdc-layout-cell",{key:t.id,attrs:{desktop:"2"}},[o("mdc-checkbox",{attrs:{label:t.name},model:{value:t.choose,callback:function(i){e.$set(t,"choose",i)},expression:"item.choose"}})],1)}),e._v(" "),o("mdc-layout-cell",{directives:[{name:"show",rawName:"v-show",value:e.isTax,expression:"isTax"}],key:e.item.id,attrs:{desktop:"12"}},[o("mdc-textfield",{attrs:{label:e.$t("fields.qualifyingRate")},model:{value:e.categoryData.quantityZeroRated,callback:function(t){e.$set(e.categoryData,"quantityZeroRated",t)},expression:"categoryData.quantityZeroRated"}})],1)],2)],1),e._v(" "),o("section",{staticClass:"sectionPanel baseInfo menuOp"},[o("menu-option",{attrs:{printers:e.printerList,title:e.$t("fields.addCategoryOption"),isShow:e.isOption,showMax:!1},on:{checkPrice:e.checkPrice,"update:option":function(t){e.isOption=t}},model:{value:e.categoryData,callback:function(t){e.categoryData=t},expression:"categoryData"}})],1),e._v(" "),o("section",{staticClass:"sectionPanel partInfo discount"},[o("mdc-layout-grid",[o("mdc-layout-cell",{attrs:{desktop:"12",tablet:"8",phone:"4"}},[o("mdc-checkbox",{attrs:{label:e.$t("fields.discountAllowance")},model:{value:e.isDiscount,callback:function(t){e.isDiscount=t},expression:"isDiscount"}})],1)],1),e._v(" "),o("mdc-layout-grid",{directives:[{name:"show",rawName:"v-show",value:e.isDiscount,expression:"isDiscount"}],staticClass:"gridPb"},[o("mdc-layout-cell",{attrs:{desktop:"3"}},[o("mdc-checkbox",{attrs:{label:e.$t("fields.discountApplicable")},model:{value:e.discountApplicable,callback:function(t){e.discountApplicable=t},expression:"discountApplicable"}})],1),e._v(" "),o("mdc-layout-cell",{attrs:{desktop:"5"}},[o("mdc-checkbox",{attrs:{label:e.$t("fields.applicableForOrderDiscount")},model:{value:e.applicableForOrderDiscount,callback:function(t){e.applicableForOrderDiscount=t},expression:"applicableForOrderDiscount"}})],1),e._v(" "),o("mdc-layout-cell",{attrs:{desktop:"4"}},[o("mdc-checkbox",{attrs:{label:e.$t("fields.applicableToTriggerPromotion")},model:{value:e.applicableToTriggerPromotion,callback:function(t){e.applicableToTriggerPromotion=t},expression:"applicableToTriggerPromotion"}})],1)],1)],1),e._v(" "),o("section",{staticClass:"sectionPanel partInfo order"},[o("mdc-layout-grid",[o("mdc-layout-cell",{attrs:{desktop:"12",tablet:"8",phone:"4"}},[o("mdc-checkbox",{attrs:{label:e.$t("fields.requiredBeforeSettle")},model:{value:e.categoryData.requireCategory,callback:function(t){e.$set(e.categoryData,"requireCategory",t)},expression:"categoryData.requireCategory"}})],1)],1)],1),e._v(" "),e._e(),e._v(" "),o("section",{staticClass:"sectionPanel baseInfo"},[o("img",{staticClass:"itemImg",attrs:{src:e.categoryData.thumbPath?e.GLOBAL.imgPath+e.categoryData.thumbPath:e.GLOBAL.defaultImg},on:{click:e.imgClick}})])])]),e._v(" "),o("footer",{staticClass:"whitefooter"},[o("div",{staticClass:"mdl-mini-footer__right-section"},[o("mdc-button",{on:{click:e.historyBack}},[e._v(e._s(e.$t("btns.cancel")))]),e._v(" "),o("mdc-button",{staticClass:"btnColor",attrs:{disabled:""===e.categoryData.name.replace(/\s/g,"")||e.isSaving},on:{click:e.save}},[e._v(e._s(e.$t("btns.save")))])],1)]),e._v(" "),o("section",{staticClass:"success-dialog successCategoty"},[o("commonDialog",{ref:"successCategotyDialog",attrs:{title:e.$t("fields.successSaved"),accept:e.$t("fields.creatAnother"),receive:e.$t("fields.backToList"),cancel:e.$t("btns.ok")},on:{accept:function(){e.createNew()},receive:function(){e.historyBack()}}})],1),e._v(" "),o("section",[o("mdc-dialog",{ref:"responseDialog",staticClass:"responseDialog",attrs:{title:e.responseMsg,accept:"",cancel:e.$t("btns.ok"),"accept-disabled":""}})],1),e._v(" "),o("section",{attrs:{id:"uploadImage"}},[o("mdc-dialog",{ref:"uploadImage",attrs:{title:e.$t("btns.uploadImage"),accept:e.$t("btns.save"),cancel:e.$t("btns.cancel")},on:{accept:e.onAddImagePath,cancel:e.cancel}},[o("image-upload-with-preview",{attrs:{imgSrc:e.thumbPath,isShowPic:e.isShowPic},on:{updatePic:e.updatePic}})],1)],1)],1)},staticRenderFns:[]};var G=i("vSla")(F,M,!1,function(t){i("w/Nl")},null,null);e.default=G.exports},Ohtz:function(t,e,i){"use strict";var o=i("3cXf"),s=i.n(o),n=i("VbKi"),a=i("Y0Uy"),r=i.n(a),c=i("cZrP"),l=i("Nxqm"),p=i("WVI2"),u={name:"menuOption",components:{ImageUploadWithPreview:l.a,PaginationBySever:c.a,ColorPicker:p.a,Bubble:n.a},props:["printers","showMax","title","item","isShow","value"],data:function(){return{oIndex:-1,addBnt:!1,addSubBnt:!1,oSubIndex:-1,searchOptions:[],option:{id:"",name:"",posName:"",shortName:"",price:"",color:this.GLOBAL.color,displayPriority:"",thumbPath:"",printerIds:[],numOfItemOptionAllowed:"",copyedOptionId:""},subOption:{id:"",name:"",posName:"",shortName:"",price:"",color:this.GLOBAL.color,displayPriority:"",thumbPath:"",printerIds:[]},currentOpIndex:0,selectPrinters:[],copySign:"",optoins:[],copyTitle:"",searchInput:"",selectOptions:[],subOptions:[],level:"",thumbPath:"",isShowPic:!1,isShowColor:!1,currentIndex:"",printersName:"",optionPage:[]}},computed:{getOptionWatchTempToArray:function(){var t=[];for(var e in this.selectOptions)t.push(this.selectOptions[e].id);return t}},watch:{searchInput:function(){this.searchInput&&null!=this.searchInput.trim()&&""!=this.searchInput.trim()?(this.optionPage=[],this.searchName()):this.optionPage=[]}},methods:{cancel:function(){this.isShowPic=!1},hideSubOption:function(t){},updatePic:function(t){this.thumbPath=t},imgSubClick:function(t){this.oSubIndex=t,this.isShowPic=!0,this.thumbPath=this.subOptions[t].thumbPath||"",this.$refs.uploadOptionImage.show()},validatePrice:function(t,e){var i=new RegExp("^[0-9]+(.[0-9]{1,2})?$");return!(void 0!=t&&!i.test(t.target.value))},validateSeq:function(t,e){if(void 0!=t){var i=t.target.value,o=0;for(var s in this.value.options)null!=this.value.options[s].displayPriority&&""!=this.value.options[s].displayPriority&&null!=i&&""!=i&&i==this.value.options[s].displayPriority&&o++;for(var s in o>1&&(t.target.value="",i="",o=0),this.value.options)e==this.value.options[s]&&(this.value.options[s].displayPriority=i)}},validateSubSeq:function(t,e,i){if(void 0!=t){var o=0,s=t.target.value;for(var n in e.subOptions)null!=e.subOptions[n].displayPriority&&""!=e.subOptions[n].displayPriority&&null!=s&&""!=s&&s==e.subOptions[n].displayPriority&&o++;for(var n in o>1&&(t.target.value="",s="",o=0),this.value.options)if(e==this.value.options[n])for(var a in e.subOptions)if(i==e.subOptions[a]){this.value.options[n].subOptions[a].displayPriority=s;break}}},imgClick:function(t,e){this.oSubIndex=-1,this.currentOpIndex=t,e>=0?(this.level="SUB",this.oSubIndex=e,this.thumbPath=this.value.options[t].subOptions[e].thumbPath||""):(this.level="",this.thumbPath=this.value.options[t].thumbPath||""),this.isShowPic=!0,this.$refs.uploadOptionImage.show()},onAddImagePath:function(){this.oSubIndex>=0?"SUB"!=this.level?this.subOptions[this.oSubIndex].thumbPath=this.thumbPath:this.value.options[this.currentOpIndex].subOptions[this.oSubIndex].thumbPath=this.thumbPath:this.value.options[this.currentOpIndex].thumbPath=this.thumbPath,this.isShowPic=!1},cancelSubOption:function(){this.subOptions=[],this.$refs.modalSubOpion.close()},subOptionSubmit:function(){for(var t in this.value.options[this.currentOpIndex].subOptions||(this.value.options[this.currentOpIndex].subOptions=[]),this.subOptions){for(var e in console.log("this.subOptions[i]-----------------",this.subOptions[t]),delete this.subOptions[t].itemOptionId,delete this.subOptions[t].id,this.value.options[this.currentOpIndex].subOptions){var i=this.value.options[this.currentOpIndex].subOptions[e].displayPriority;if(void 0!=i&&null!=i&&""!=i&&this.subOptions[t].displayPriority==i){this.subOptions[t].displayPriority="";break}}this.value.options[this.currentOpIndex].subOptions.push(this.subOptions[t])}this.$refs.modalSubOpion.close(),this.pageNotChange()},onValidate:function(t){t.accept},deleteSub:function(t,e){t.splice(e,1),this.pageNotChange()},optionClick:function(t,e){if(e)this.selectOptions.push(t);else for(var i in this.selectOptions)this.selectOptions[i].id===t.id&&(console.log(t),this.selectOptions.splice(i,1),i--)},pageSubOFilterChange:function(t){this.optionPage=t,console.log("this.optionPage",this.optionPage),this.searchName()},searchName:r.a.debounce(function(){var t=this;this.searchOptions=[],this.searchInput&&("A"==this.copySign?this.$$fetch_item_getOptions({data:{name:this.searchInput,pageNo:this.optionPage||0},opts:{}}).then(function(e){t.searchOptions=e.options,t.optionPage=e.page||[];var i=t.selectOptions;t.selectOptions=[],t.selectOptions=i},function(e){t.searchOptions=[],t.optionPage=[];var i=t.selectOptions;t.selectOptions=[],t.selectOptions=i}):this.$$fetch_item_getItemOptions({data:{name:this.searchInput,showNoOptionItem:!1,pageNo:this.optionPage||0},opts:{}}).then(function(e){t.searchOptions=e.items,t.optionPage=e.page||[];var i=t.selectOptions;t.selectOptions=[],t.selectOptions=i},function(e){t.searchOptions=[],t.optionPage=[];var i=t.selectOptions;t.selectOptions=[],t.selectOptions=i}))},500),initValue:function(){this.oIndex=-1,this.addBnt=!1,this.addSubBnt=!1,this.isShowColor=!1},addSubPrinters:function(t){this.oSubIndex=t,this.level="",this.selectPrinters=JSON.parse(s()(this.subOptions[t].printerIds||[])),this.$refs.modalPrinter.show()},getPrintersName:function(t){var e=[];return this.printers.forEach(function(i){t.indexOf(i.id)>-1&&e.push(i.name)}),e.join(",")},addPrinters:function(t,e){this.oSubIndex=-1,this.currentOpIndex=t,e>=0?(this.level="SUB",this.oSubIndex=e,this.selectPrinters=JSON.parse(s()(this.value.options[t].subOptions[e].printerIds||[]))):(this.level="",this.selectPrinters=JSON.parse(s()(this.value.options[t].printerIds||[]))),this.$refs.modalPrinter.show()},submitPrinter:function(){this.oSubIndex>=0?"SUB"==this.level?this.value.options[this.currentOpIndex].subOptions[this.oSubIndex].printerIds=this.selectPrinters:this.subOptions[this.oSubIndex].printerIds=this.selectPrinters:this.value.options[this.currentOpIndex].printerIds=this.selectPrinters,this.pageNotChange()},openOption:function(t){this.addBnt=!1,this.oIndex==t?this.oIndex=-1:this.oIndex=t},pageNotChange:function(){this.oIndex=0,setTimeout(function(){this.oIndex=-1}.bind(this),50)},delSubOption:function(t){this.subOptions.splice(t,1)},addOption:function(){for(var t in this.options)for(var e in delete this.options[t].id,this.options[t].subOptions)this.options[t].subOptions[e].copyedOptionId=this.options[t].subOptions[e].id,console.log("this.options[i]['subOptions'][j].copyedOptionId",this.options[t].subOptions.copyedOptionId),delete this.options[t].subOptions[e].id;this.value.options.push(JSON.parse(s()(this.option)))},openSubOption:function(t){this.currentOpIndex=t,this.subOptions=[],this.addSubOption(),console.info(),this.$refs.modalSubOpion.onCancel=this.cancelSubOption,this.$refs.modalSubOpion.show()},addSubOption:function(){for(var t in this.addSubBnt=!1,this.subOption)delete this.subOption[t].id;this.subOptions.push(JSON.parse(s()(this.subOption)))},copyOption:function(t){this.initValue(),this.copyTitle=this.$t("fields.copyTitle"+t),this.copySign=t,this.searchInput="",this.searchOptions=[],this.selectOptions=[],this.$refs.modalCopyOpion.show(),setTimeout(function(){this.$refs.search.focus()}.bind(this),500)},cpOptionSubmit:function(){var t=[];if(this.currentOpIndex>=0){for(var e in this.subOptions)void 0!=this.subOptions[e]&&null!=this.subOptions[e].displayPriority&&""!=this.subOptions[e].displayPriority&&t.push(this.subOptions[e].displayPriority);for(var e in this.selectOptions){if(this.selectOptions[e].printerIds||(this.selectOptions[e].printerIds=[]),this.selectOptions[e].copyedOptionId=this.selectOptions[e].id,delete this.selectOptions[e].subOptions,delete this.selectOptions[e].id,this.selectOptions[e][""],void 0!=this.selectOptions[e].displayPriority&&null!=this.selectOptions[e].displayPriority&&""!=this.selectOptions[e].displayPriority)for(var i in t)if(t[i]==this.selectOptions[e].displayPriority){this.selectOptions[e].displayPriority="";break}for(var i in void 0===this.selectOptions[e].price&&(this.selectOptions[e].price=0),this.selectOptions[e].subOptions)void 0===this.selectOptions[e].subOptions[i].price&&this.$set(this.selectOptions[e].subOptions[i],"price",0),void 0===this.selectOptions[e].subOptions[i].displayPriority&&this.$set(this.selectOptions[e].subOptions[i],"displayPriority","");this.subOptions.push(this.selectOptions[e]),void 0!=this.selectOptions[e].displayPriority&&null!=this.selectOptions[e].displayPriority&&""!=this.selectOptions[e].displayPriority&&t.push(this.selectOptions[e].displayPriority)}console.log("该场景只为其它菜中一级OPtion作为该当前option中的二级",this.subOptions)}else{var o=JSON.parse(s()(this.selectOptions));if(o[0].options)for(var e in o=o[0].options,this.selectOptions)e>0&&(o=o.concat(JSON.parse(s()(this.selectOptions[e].options))));for(var e in this.value.options)void 0!=this.value.options[e]&&null!=this.value.options[e].displayPriority&&""!=this.value.options[e].displayPriority&&t.push(this.value.options[e].displayPriority);for(var e in o){for(var i in o[e].printerIds||(o[e].printerIds=[]),o[e].subOptions)o[e].subOptions[i].copyedOptionId=o[e].subOptions[i].id,o[e].subOptions[i].id="",delete o[e].subOptions[i].itemOptionId,o[e].subOptions[i].printerIds||(o[e].subOptions[i].printerIds=[]);if(o[e].copyedOptionId=o[e].id,delete o[e].id,void 0!=o[e].displayPriority&&null!=o[e].displayPriority&&""!=o[e].displayPriority)for(var i in t)if(t[i]==o[e].displayPriority){o[e].displayPriority="";break}for(var i in void 0===o[e].price&&(o[e].price=0),o[e].subOptions)void 0===o[e].subOptions[i].price&&this.$set(o[e].subOptions[i],"price",0),void 0===o[e].subOptions[i].displayPriority&&this.$set(o[e].subOptions[i],"displayPriority","");this.value.options.push(o[e]),null!=o[e].displayPriority&&""!=o[e].displayPriority&&t.push(o[e].displayPriority)}}this.selectOptions=[]},init:function(t){},optionSubmit:function(){for(var t in this.value.options[this.currentOpIndex].subOptions||(this.value.options[this.currentOpIndex].subOptions=[]),this.subOptions)this.value.options[this.currentOpIndex].subOptions.push(this.subOptions[t])},optionEvent:function(t){this.$emit("optionEvent",{item:this.value,isShow:this.show})},isChange:function(t){this.$emit("update:option",t),this.value.options.length<1&&t&&this.addOption()}}},d={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"option",on:{click:t.initValue}},[i("section",{staticClass:"flexRow"},[i("div",{staticClass:"f1"},[i("mdc-checkbox",{attrs:{label:t.title,checked:t.isShow&&t.value.options.length>0},on:{change:function(e){t.isChange(!(t.isShow&&t.value.options.length>0))}}})],1),t._v(" "),t.showMax?i("div",{staticClass:"f1 ta"},[i("mdc-textfield",{attrs:{maxlength:"3",label:t.$t("fields.itemOptionMax"),title:"Please Input Number"},on:{keyup:function(e){t.value.numOfItemOptionAllowed=e.target.value.replace(/[^\d]/g,"")}},model:{value:void 0===t.value.numOfItemOptionAllowed||""===t.value.numOfItemOptionAllowed?t.value.numOfItemOptionAllowed="0":t.value.numOfItemOptionAllowed,callback:function(e){t.$set(void 0===t.value.numOfItemOptionAllowed||""===t.value.numOfItemOptionAllowed?t.value.numOfItemOptionAllowed="0":t.value,"numOfItemOptionAllowed",e)},expression:"(value.numOfItemOptionAllowed===undefined || value.numOfItemOptionAllowed==='')?value.numOfItemOptionAllowed='0':value.numOfItemOptionAllowed"}})],1):t._e(),t._v(" "),t.isShow?i("div",{staticClass:"f1 tr"},[i("mdc-switch",{attrs:{label:t.$t("fields.fullScreen")},model:{value:t.value.optionFullScreen,callback:function(e){t.$set(t.value,"optionFullScreen",e)},expression:"value.optionFullScreen"}}),t._v(" "),i("bubble",{attrs:{cssText:"width:500px;left:-220px;"}},[i("div",[t._v(t._s(t.$t("tips.fullScreenMode.tip")))])])],1):t._e()]),t._v(" "),i("section",{staticClass:"mt10"},[t._l(t.value.options,function(e,o){return t.value.options.length>0&&t.isShow?[i("div",{staticClass:"row mdc-layout-grid"},[i("div",{staticClass:"f1"},[i("mdc-textfield",{attrs:{label:t.$t("fields.name")},model:{value:e.name,callback:function(i){t.$set(e,"name",i)},expression:"o.name"}})],1),t._v(" "),i("div",{staticClass:"f1"},[i("mdc-textfield",{attrs:{label:t.$t("fields.kitchenName")},model:{value:e.shortName,callback:function(i){t.$set(e,"shortName",i)},expression:"o.shortName"}})],1),t._v(" "),i("div",{staticClass:"f1"},[i("mdc-textfield",{attrs:{label:t.$t("fields.posName"),maxlength:"8"},model:{value:e.posName,callback:function(i){t.$set(e,"posName",i)},expression:"o.posName"}})],1),t._v(" "),i("div",{staticClass:"f0070"},[i("mdc-textfield",{attrs:{label:t.$t("fields.price")},on:{keypress:function(){t.$emit("checkPrice")},blur:function(i){t.validatePrice(i,e.price)?e.price=e.price:e.price="0"}},model:{value:void 0===e.price||""===e.price?e.price="0":e.price,callback:function(i){t.$set(void 0===e.price||""===e.price?e.price="0":e,"price",i)},expression:"(o.price===undefined || o.price==='')?o.price='0':o.price"}})],1),t._v(" "),i("div",{staticClass:"f0060 re"},[i("color-picker",{attrs:{color:e.color,isShow:t.isShowColor,index:o,currentIndex:t.currentIndex},on:{"update:color":function(i){e.color=i.color,t.isShowColor=i.isShow,t.currentIndex=i.currentIndex}}})],1),t._v(" "),i("div",{staticClass:"f0080"},[i("mdc-textfield",{attrs:{label:t.$t("fields.sequence"),pattern:"^[0-9]*$",title:"Please Input Number",maxlength:"3"},on:{blur:function(i){t.validateSeq(i,e)},keyup:function(t){e.displayPriority=t.target.value.replace(/[^\d]/g,"")}},model:{value:e.displayPriority,callback:function(i){t.$set(e,"displayPriority",i)},expression:"o.displayPriority"}})],1),t._v(" "),i("div",{staticClass:"f0080"},[i("mdc-textfield",{attrs:{label:t.$t("fields.max"),pattern:"^[0-9]*$",maxLength:"3",title:"Please Input Number"},on:{keyup:function(t){e.numOfItemOptionAllowed=t.target.value.replace(/[^\d]/g,"")}},model:{value:void 0===e.numOfItemOptionAllowed||""===e.numOfItemOptionAllowed?e.numOfItemOptionAllowed="0":e.numOfItemOptionAllowed,callback:function(i){t.$set(void 0===e.numOfItemOptionAllowed||""===e.numOfItemOptionAllowed?e.numOfItemOptionAllowed="0":e,"numOfItemOptionAllowed",i)},expression:"(o.numOfItemOptionAllowed===undefined || o.numOfItemOptionAllowed==='')?o.numOfItemOptionAllowed='0':o.numOfItemOptionAllowed"}})],1),t._v(" "),i("div",{staticClass:"re f1"},[i("div",{staticClass:"opPrinterItem",on:{click:function(e){t.addPrinters(o)}}},[i("div",{staticClass:"f1 ofh"},[i("span",[t._v(t._s(t.getPrintersName(e.printerIds)))])]),t._v("\n                  ▼\n               ")]),t._v(" "),i("mdc-textfield",{staticStyle:{width:"100%","font-size":"0"},attrs:{label:t.$t("fields.printer")},model:{value:e.printerIds.toString(),callback:function(i){t.$set(e.printerIds,"toString()",i)},expression:"o.printerIds.toString()"}})],1),t._v(" "),i("div",{staticClass:"imgBox"},[i("img",{staticClass:"optionImg",attrs:{src:e.thumbPath?t.GLOBAL.imgPath+e.thumbPath:t.GLOBAL.defaultImg},on:{click:function(e){t.imgClick(o)}}}),t._v(" "),t.oIndex==o?i("div",{staticClass:"delAlert"},[i("span",{on:{click:function(e){t.oIndex=-1,t.openSubOption(o)}}},[t._v(t._s(t.$t("btns.addForOption"))+"  ")]),t._v(" "),i("hr"),t._v(" "),i("span",{on:{click:function(e){t.oIndex=-1,t.value.options.splice(o,1),t.isChange(t.value.options.length>0)}}},[t._v(t._s(t.$t("btns.delete")))])]):t._e(),t._v(" "),i("mdc-icon",{staticStyle:{padding:"3px 5px"},attrs:{icon:"brightness_low"},nativeOn:{click:function(e){e.stopPropagation(),t.openOption(o)}}})],1)]),t._v(" "),t._l(e.subOptions,function(s,n){return i("div",{staticClass:"row"},[i("div",{class:{subTitle:!0,vhide:0!=n},staticStyle:{padding:"0 15px","line-height":"1"}},[t._v("\n               Sub Option\n            ")]),t._v(" "),i("div",{staticClass:"f1"},[i("mdc-textfield",{attrs:{label:t.$t("fields.name"),required:""},model:{value:s.name,callback:function(e){t.$set(s,"name",e)},expression:"subOp.name"}})],1),t._v(" "),i("div",{staticClass:"f1"},[i("mdc-textfield",{attrs:{label:t.$t("fields.kitchenName")},model:{value:s.shortName,callback:function(e){t.$set(s,"shortName",e)},expression:"subOp.shortName"}})],1),t._v(" "),i("div",{staticClass:"f1"},[i("mdc-textfield",{attrs:{label:t.$t("fields.posName"),maxlength:"8"},model:{value:s.posName,callback:function(e){t.$set(s,"posName",e)},expression:"subOp.posName"}})],1),t._v(" "),i("div",{staticClass:"f0060"},[i("mdc-textfield",{attrs:{label:t.$t("fields.price"),title:"Please Input Price"},on:{keypress:function(){t.$emit("checkPrice")},blur:function(e){t.validatePrice(e,s.price)?s.price=s.price+"":s.price="0"}},model:{value:s.price,callback:function(e){t.$set(s,"price",e)},expression:"subOp.price"}})],1),t._v(" "),i("div",{staticClass:"f0060 re"},[i("color-picker",{attrs:{color:s.color,isShow:t.isShowColor,index:o+"-"+n,currentIndex:t.currentIndex},on:{"update:color":function(e){s.color=e.color,t.isShowColor=e.isShow,t.currentIndex=e.currentIndex}}})],1),t._v(" "),i("div",{staticClass:"f0070"},[i("mdc-textfield",{attrs:{label:t.$t("fields.sequence"),maxlength:"3",pattern:"^[0-9]*$",title:"Please Input Number"},on:{blur:function(i){t.validateSubSeq(i,e,s)},keyup:function(t){s.displayPriority=t.target.value.replace(/[^\d]/g,"")}},model:{value:s.displayPriority,callback:function(e){t.$set(s,"displayPriority",e)},expression:"subOp.displayPriority"}})],1),t._v(" "),i("div",{staticClass:"f1",staticStyle:{position:"relative"}},[i("div",{staticClass:"opPrinterItem",on:{click:function(e){t.addPrinters(o,n)}}},[i("div",{staticStyle:{flex:"1",overflow:"hidden"}},[i("span",[t._v(t._s(t.getPrintersName(s.printerIds)))])]),t._v("\n                  ▼\n               ")]),t._v(" "),i("mdc-textfield",{staticStyle:{"font-size":"0"},attrs:{label:t.$t("fields.printer")},model:{value:s.printerIds.toString(),callback:function(e){t.$set(s.printerIds,"toString()",e)},expression:"subOp.printerIds.toString()"}})],1),t._v(" "),i("div",{staticClass:"imgBox"},[i("img",{staticClass:"optionImg",attrs:{src:s.thumbPath?t.GLOBAL.imgPath+s.thumbPath:t.GLOBAL.defaultImg},on:{click:function(e){t.imgClick(o,n)}}}),t._v(" "),i("i",{staticClass:"material-icons",staticStyle:{"font-size":"30px"},on:{click:function(i){t.deleteSub(e.subOptions,n)}}},[t._v("delete")])])])})]:t._e()})],2),t._v(" "),t.isShow?i("section",{staticStyle:{display:"flex",height:"40px",margin:"10px 0"}},[i("div",{staticClass:"mdc-button bnt",on:{click:function(e){e.preventDefault(),e.stopPropagation(),t.addBnt=!t.addBnt,t.oIndex=-1,t.currentOpIndex=-1}}},[t._v("+ "+t._s(t.$t("btns.createNew")))]),t._v(" "),t.addBnt?i("div",{staticClass:"copyAlert"},[i("div",{on:{click:function(e){t.copyOption("A")}}},[t._v("\n           "+t._s(t.$t("btns.selectExistOption"))+"\n         ")]),t._v(" "),i("div",{on:{click:function(e){t.copyOption("B")}}},[t._v(t._s(t.$t("btns.copyFromOtherItem")))]),t._v(" "),i("hr"),t._v(" "),i("div",{on:{click:function(e){t.addOption()}}},[t._v(t._s(t.$t("btns.createNewOption")))])]):t._e()]):t._e(),t._v(" "),i("form",{staticClass:"modalSubOpion",on:{submit:function(e){return e.preventDefault(),t.subOptionSubmit(e)}}},[i("mdc-dialog",{ref:"modalSubOpion",attrs:{title:"",cancel:t.$t("btns.cancel"),accept:t.$t("btns.apply")},on:{validate:t.onValidate}},[i("div",{staticClass:"customerHeader"},[t._v(t._s(t.$t("btns.addForOption"))+":")]),t._v(" "),i("div",{staticStyle:{height:"50vh","overflow-y":"auto","overflow-x":"hidden","padding-bottom":"30px"}},[t._l(t.subOptions,function(e,o){return i("div",{staticClass:"subRow"},[i("div",[i("mdc-textfield",{attrs:{label:t.$t("fields.optionName"),required:""},model:{value:e.name,callback:function(i){t.$set(e,"name",i)},expression:"o.name"}})],1),t._v(" "),i("div",[i("mdc-textfield",{attrs:{label:t.$t("fields.kitchenName")},model:{value:e.shortName,callback:function(i){t.$set(e,"shortName",i)},expression:"o.shortName"}})],1),t._v(" "),i("div",[i("mdc-textfield",{attrs:{label:t.$t("fields.posName"),maxlength:"8"},model:{value:e.posName,callback:function(i){t.$set(e,"posName",i)},expression:"o.posName"}})],1),t._v(" "),i("div",[i("mdc-textfield",{attrs:{label:t.$t("fields.price"),title:"Please Input Price"},on:{keypress:function(){t.$emit("checkPrice")},blur:function(i){t.validatePrice(i,e.price)?e.price=e.price+"":e.price="0"}},model:{value:e.price,callback:function(i){t.$set(e,"price",i)},expression:"o.price"}})],1),t._v(" "),i("div",{staticClass:"re"},[i("color-picker",{attrs:{color:e.color,isShow:t.isShowColor,index:"B"+o,currentIndex:t.currentIndex},on:{"update:color":function(i){e.color=i.color,t.isShowColor=i.isShow,t.currentIndex=i.currentIndex}}})],1),t._v(" "),i("div",[i("mdc-textfield",{attrs:{label:t.$t("fields.sequence"),pattern:"^[0-9]*$",title:"Please Input Number",maxlength:"3"},on:{keyup:function(t){e.displayPriority=t.target.value.replace(/[^\d]/g,"")}},model:{value:e.displayPriority,callback:function(i){t.$set(e,"displayPriority",i)},expression:"o.displayPriority"}})],1),t._v(" "),i("div",{staticStyle:{"text-align":"center"}},[i("img",{staticClass:"optionImg",attrs:{src:e.thumbPath?t.GLOBAL.imgPath+e.thumbPath:t.GLOBAL.defaultImg},on:{click:function(e){t.imgSubClick(o)}}})]),t._v(" "),i("div",{staticStyle:{position:"relative",flex:"2"}},[i("div",{staticClass:"opPrinterItem",on:{click:function(e){t.addSubPrinters(o)}}},[i("div",{staticStyle:{flex:"0 0 100%",overflow:"hidden","text-align":"left"}},[i("span",[t._v(t._s(t.getPrintersName(e.printerIds)))])]),t._v("\n                     ▼\n                  ")]),t._v(" "),i("mdc-textfield",{staticStyle:{width:"100%","font-size":"0px"},attrs:{value:e.printerIds.toString(),label:t.$t("fields.printer")}})],1),t._v(" "),i("div",{staticStyle:{flex:"1 1 45px","min-width":"45px","text-align":"center"}},[i("i",{staticClass:"material-icons",staticStyle:{"font-size":"30px"},on:{click:function(e){t.subOptions.splice(o,1)}}},[t._v("delete")])])])}),t._v(" "),i("section",{staticStyle:{padding:"0 10px","margin-top":"10px",display:"flex"}},[i("div",{staticClass:"mdc-button bnt",on:{click:function(e){e.preventDefault(),e.stopPropagation(),t.addSubBnt=!t.addSubBnt}}},[t._v("+ "+t._s(t.$t("btns.createNew"))+"\n              ")]),t._v(" "),t.addSubBnt?i("div",{staticClass:"copyAlert",staticStyle:{height:"70px","font-size":"1.5rem",color:"#666",top:"-10px"}},[i("div",{on:{click:function(e){t.copyOption("A")}}},[t._v("\n                     "+t._s(t.$t("btns.selectExistOption"))+"\n                  ")]),t._v(" "),i("hr"),t._v(" "),i("div",{on:{click:function(e){t.addSubOption()}}},[t._v("\n                     "+t._s(t.$t("btns.createNewOption"))+"\n                  ")])]):t._e()])],2)])],1),t._v(" "),i("form",{staticClass:"modalCopyOpion",on:{submit:function(t){t.preventDefault()}}},[i("mdc-dialog",{ref:"modalCopyOpion",attrs:{title:"",accept:t.$t("btns.apply"),cancel:t.$t("btns.cancel")},on:{accept:t.cpOptionSubmit}},[i("div",{staticClass:"customerHeader",on:{click:function(e){t.level=0}}},[t._v(t._s(this.copyTitle))]),t._v(" "),i("div",{staticClass:"customerBody",staticStyle:{overflow:"visible",position:"relative"}},[i("div",{staticClass:"inputSearch"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.searchInput,expression:"searchInput"}],ref:"search",domProps:{value:t.searchInput},on:{input:function(e){e.target.composing||(t.searchInput=e.target.value)}}}),t._v(" "),i("i",{staticClass:"material-icons"},[t._v("search")])]),t._v(" "),"A"==t.copySign?i("div",{staticClass:"searchBox"},t._l(t.searchOptions,function(e,o){return i("div",[[i("mdc-checkbox",{staticStyle:{"margin-left":"60px"},attrs:{label:e.name},on:{change:function(i){t.optionClick(e,i)}},model:{value:-1!=t.getOptionWatchTempToArray.indexOf(e.id),callback:function(e){t.$set(t.getOptionWatchTempToArray,"indexOf(op['id'])!=-1",e)},expression:"getOptionWatchTempToArray.indexOf(op['id'])!=-1"}}),t._v(" "),t._l(e.subOptions,function(e,o){return i("div",{staticStyle:{"margin-left":"110px"}},[t._v(t._s(e.name))])})]],2)})):t._e(),t._v(" "),"B"==t.copySign?i("div",{staticClass:"searchBox"},t._l(t.searchOptions,function(e,o){return i("div",[[i("mdc-checkbox",{staticStyle:{"margin-left":"60px"},attrs:{label:e.name},on:{change:function(i){t.optionClick(e,i)}},model:{value:-1!=t.getOptionWatchTempToArray.indexOf(e.id),callback:function(e){t.$set(t.getOptionWatchTempToArray,"indexOf(item['id'])!=-1",e)},expression:"getOptionWatchTempToArray.indexOf(item['id'])!=-1"}}),t._v(" "),t._l(e.options,function(e,o){return i("div",{staticClass:"ml110"},[t._v("\n                        "+t._s(e.name)+"\n                        "),t._l(e.subOptions,function(e,o){return i("div",{staticClass:"ml30"},[t._v(t._s(e.name))])})],2)})]],2)})):t._e(),t._v(" "),i("mdc-layout-grid",{staticClass:"list-pagination",staticStyle:{position:"absolute",left:"0",bottom:"-80px"}},[i("mdc-layout-cell",{attrs:{desktop:"4",tablet:"2"}},[i("pagination-by-sever",{attrs:{page:t.optionPage},on:{changePage:t.pageSubOFilterChange}})],1)],1)],1)])],1),t._v(" "),i("form",{staticClass:"modalPrinter",on:{submit:function(t){t.preventDefault()}}},[i("mdc-dialog",{ref:"modalPrinter",attrs:{title:"",accept:t.$t("btns.apply"),cancel:t.$t("btns.cancel")},on:{accept:t.submitPrinter}},[i("div",{staticClass:"customerHeader",on:{click:function(e){t.level=0}}},[t._v("\n           "+t._s(t.$t("fields.specPrinterForOption"))+"\n         ")]),t._v(" "),i("div",{staticClass:"printerBody"},t._l(t.printers,function(e){return i("div",{},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectPrinters,expression:"selectPrinters"}],staticClass:"checked dsn",attrs:{type:"checkbox",name:"checkboxA",id:"a"+e.id},domProps:{value:e.id,checked:Array.isArray(t.selectPrinters)?t._i(t.selectPrinters,e.id)>-1:t.selectPrinters},on:{change:function(i){var o=t.selectPrinters,s=i.target,n=!!s.checked;if(Array.isArray(o)){var a=e.id,r=t._i(o,a);s.checked?r<0&&(t.selectPrinters=o.concat([a])):r>-1&&(t.selectPrinters=o.slice(0,r).concat(o.slice(r+1)))}else t.selectPrinters=n}}}),t._v(" "),i("label",{staticClass:"tc",attrs:{for:"a"+e.id}},[t._v(t._s(e.name))])])}))])],1),t._v(" "),i("form",{attrs:{id:"uploadOptionImage"},on:{submit:function(t){t.preventDefault()}}},[i("mdc-dialog",{ref:"uploadOptionImage",attrs:{title:"Upload Image",accept:"Apply",cancel:"Cancel"},on:{accept:t.onAddImagePath,cancel:t.cancel}},[i("image-upload-with-preview",{attrs:{imgSrc:t.thumbPath,isShowPic:t.isShowPic},on:{updatePic:t.updatePic}})],1)],1)])},staticRenderFns:[]};var h=i("vSla")(u,d,!1,function(t){i("poxV")},null,null);e.a=h.exports},V1C7:function(t,e){},cb90:function(t,e){},jAm5:function(t,e){},kfHR:function(t,e,i){t.exports={default:i("qQfv"),__esModule:!0}},kksE:function(t,e,i){"use strict";var o=i("lIiZ"),s=i("go9Q");t.exports=function(t,e,i){e in t?o.f(t,e,s(0,i)):t[e]=i}},poxV:function(t,e){},qQfv:function(t,e,i){i("IsPG"),i("yrDz"),t.exports=i("AKd3").Array.from},"w/Nl":function(t,e){},yrDz:function(t,e,i){"use strict";var o=i("WwGG"),s=i("FITv"),n=i("OXaN"),a=i("kDTw"),r=i("V2W7"),c=i("CFGK"),l=i("kksE"),p=i("YW8S");s(s.S+s.F*!i("75+0")(function(t){Array.from(t)}),"Array",{from:function(t){var e,i,s,u,d=n(t),h="function"==typeof this?this:Array,m=arguments.length,f=m>1?arguments[1]:void 0,v=void 0!==f,b=0,g=p(d);if(v&&(f=o(f,m>2?arguments[2]:void 0,2)),void 0==g||h==Array&&r(g))for(i=new h(e=c(d.length));e>b;b++)l(i,b,v?f(d[b],b):d[b]);else for(u=g.call(d),i=new h;!(s=u.next()).done;b++)l(i,b,v?a(u,f,[s.value,b],!0):s.value);return i.length=b,i}})}});