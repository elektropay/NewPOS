webpackJsonp([9],{"3w5z":function(e,t){},"E/aT":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o("bXNp"),s={render:function(){var e=this,t=this,o=t.$createElement,a=t._self._c||o;return a("mdc-layout-app",{staticClass:"categoryContent"},[a("mdc-toolbar",{staticClass:"blackheader",attrs:{slot:"toolbar"},slot:"toolbar"},[a("mdc-headline",[a("span",{on:{click:t.historyBack}},[a("mdc-icon",{attrs:{icon:"keyboard_arrow_left"}})],1),t._v(t._s(t.$t("fields.backToGroup"))+" : "+t._s(t.groupName)+"\r\n    ")])],1),t._v(" "),a("form",{on:{submit:function(e){e.preventDefault()}}},[a("main",{staticClass:"panel"},[a("section",{staticClass:"sectionPanel baseInfo"},[a("mdc-layout-grid",[a("mdc-layout-cell",{attrs:{desktop:"12",tablet:"8",phone:"4"}},[a("mdc-title",[t._v(t._s(t.$t("fields.name")))])],1),t._v(" "),a("mdc-layout-cell",{attrs:{desktop:"3"}},[a("mdc-textfield",{attrs:{label:t.$t("fields.optionCategoryName"),required:""},model:{value:t.optionCategoryName,callback:function(e){t.optionCategoryName=e},expression:"optionCategoryName"}})],1),t._v(" "),a("mdc-layout-cell",{attrs:{desktop:"3"}},[a("mdc-textfield",{attrs:{label:t.$t("fields.posName"),maxlength:"15"},model:{value:t.posName,callback:function(e){t.posName=e},expression:"posName"}})],1),t._v(" "),a("mdc-layout-cell",{attrs:{desktop:"3"}},[a("div",{staticClass:"re"},[a("color-picker",{attrs:{color:t.colors,isShow:t.isShowColor},on:{"update:color":function(o){t.colors=o.color,e.colors=o.color,e.isShowColor=o.isShow}}})],1)])],1)],1),t._v(" "),a("section",{staticClass:"sectionPanel baseInfo"},[a("img",{staticClass:"itemImg",attrs:{src:t.thumbPath?t.GLOBAL.imgPath+t.thumbPath:t.GLOBAL.defaultImg},on:{click:t.imgClick}})])])]),t._v(" "),a("footer",{staticClass:"whitefooter"},[a("div",{staticClass:"mdl-mini-footer__right-section"},[a("mdc-button",{on:{click:t.historyBack}},[t._v(t._s(t.$t("btns.cancel")))]),t._v(" "),a("mdc-button",{staticClass:"btnColor",attrs:{disabled:""===t.optionCategoryName.replace(/\s/g,"")},on:{click:t.save}},[t._v(t._s(t.$t("btns.save")))])],1)]),t._v(" "),a("section",{staticClass:"success-dialog successCategoty"},[a("mdc-dialog",{ref:"successCategotyDialog",attrs:{accept:t.$t("fields.creatAnother"),cancel:t.$t("btns.back"),title:t.$t("fields.successSaved")},on:{accept:t.createNew,cancel:t.historyBack}}),t._v(" "),a("common-dialog",{ref:"successCategotyDialog",attrs:{title:t.$t("fields.successSaved"),accept:t.$t("fields.creatAnother"),receive:t.$t("fields.backToList"),cancel:t.$t("btns.ok")},on:{accept:function(){t.createNew()},receive:function(){t.historyBack()}}})],1),t._v(" "),a("section",[a("mdc-dialog",{ref:"responseDialog",staticClass:"responseDialog",attrs:{title:t.responseMsg,accept:"",cancel:t.$t("btns.ok"),"accept-disabled":""}})],1),t._v(" "),a("section",{attrs:{id:"uploadImage"}},[a("mdc-dialog",{ref:"uploadImage",attrs:{title:t.$t("btns.uploadImage"),accept:"Apply",cancel:"Cancel"},on:{accept:t.onAddImagePath,cancel:t.cancel}},[a("image-upload-with-preview",{attrs:{imgSrc:t.thumbPath,isShowPic:t.isShowPic},on:{updatePic:t.updatePic}})],1)],1)],1)},staticRenderFns:[]};var r=function(e){o("3w5z")},i=o("vSla")(a.a,s,!1,r,null,null);t.default=i.exports},bXNp:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign__=__webpack_require__("aA9S"),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign__),__WEBPACK_IMPORTED_MODULE_1__utils_common_common_js__=__webpack_require__("JahA"),__WEBPACK_IMPORTED_MODULE_2_components_colorPicker__=__webpack_require__("WVI2"),__WEBPACK_IMPORTED_MODULE_3_utils_Global__=__webpack_require__("pfH6"),__WEBPACK_IMPORTED_MODULE_4__components_uploadImageWithPreview__=__webpack_require__("Nxqm"),__WEBPACK_IMPORTED_MODULE_5__components_commonDialog__=__webpack_require__("P8AZ");__webpack_exports__.a={components:{ColorPicker:__WEBPACK_IMPORTED_MODULE_2_components_colorPicker__.a,ImageUploadWithPreview:__WEBPACK_IMPORTED_MODULE_4__components_uploadImageWithPreview__.a,commonDialog:__WEBPACK_IMPORTED_MODULE_5__components_commonDialog__.a},data:function data(){return{responseMsg:"",id:this.$route.params.categoryId||"",menuName:this.$route.query?this.$route.query.menuName:"",groupName:this.$route.query?this.$route.query.groupName:"",groupId:this.$route.params?this.$route.params.groupId:"",menuId:this.$route.query?this.$route.query.menuId:"",isGlobalOption:eval(this.$route.query.isGlobalOption),isShowColor:!1,isOption:!1,thumbPath:"",colors:"7DBFE2",isShowPic:!1,optionCategoryName:"",posName:"",searchType:this.$route.query.searchType||"",searchWord:this.$route.query.searchWord||"",referrer:this.$route.query.from||""}},mounted:function(){this.getCategoryDetail()},computed:{language:function(){return this.$store.state.language}},methods:{cancel:function(){this.isShowPic=!1},updatePic:function(e){this.thumbPath=e},onAddImagePath:function(){this.isShowPic=!1},historyBack:function(){"group"===this.referrer?this.searchType||this.searchWord?this.$router.push({path:this.$route.query.hash,query:this.$route.query}):this.$router.go(-1):"menu"===this.referrer?this.searchType||this.searchWord?this.$router.push({name:"restaurantMenu",params:{searchType:this.searchType,searchWord:this.searchWord}}):this.$router.go(-1):this.$router.push({path:"/groupList/"+this.$route.query.menuId,query:__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(this.$route.query,{groupId:this.groupId})})},save:function(){var e=this,t={};t.groupId=this.groupId,t.name=this.optionCategoryName,t.posName=""===this.posName?this.posName=this.optionCategoryName.substr(0,15):this.posName,t.color=this.colors,t.thumbPath=this.thumbPath,"new"===this.id?this.$$fetch_category_globalOptionCategory({data:t}).then(function(t){if(t&&t.globalOptionCategory){e.id=t.globalOptionCategory.id;var o=e.$route.path.replace("New",e.id);e.$router.push({path:o,query:e.$route.query}),e.$refs.successCategotyDialog.show()}},function(t){e.responseMsg=t.error.msg,e.$refs.responseDialog.show()}):this.id&&(t.id=this.id,this.$$fetch_category_editGlobalOptionCategory({data:t}).then(function(t){t&&t.globalOptionCategory&&e.$refs.successCategotyDialog.show()},function(t){e.responseMsg=t.error.msg,e.$refs.responseDialog.show()}))},imgClick:function(){this.isShowPic=!0,this.$refs.uploadImage.show()},createNew:function(){this.$router.push({path:"/globalcategory/"+this.groupId+"/new",query:__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(this.$route.query,{groupId:this.groupId})}),this.$router.go(0)},getCategoryDetail:function(){var e=this;"new"!==this.id&&this.$$fetch_category_getGlobalOptionCategory({opts:{afterData:this.id,getTpye:"afterUrl"}}).then(function(t){t&&t.globalOptionCategory&&(t.globalOptionCategory.fieldDisplayNameGroups&&t.globalOptionCategory.fieldDisplayNameGroups.length>0&&t.globalOptionCategory.fieldDisplayNameGroups.forEach(function(e){t.globalOptionCategory=__WEBPACK_IMPORTED_MODULE_1__utils_common_common_js__.a.getObjLangField(e.fieldName,e.fieldDisplayNames,t.globalOptionCategory,"en")}),console.log(t.globalOptionCategory),e.colors=t.globalOptionCategory.color||"7dbfe2",e.optionCategoryName=t.globalOptionCategory.name||"",e.posName=t.globalOptionCategory.posName||e.optionCategoryName||"",e.thumbPath=t.globalOptionCategory.thumbPath||"")})}}}}});