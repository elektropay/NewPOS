webpackJsonp([8],{hAL9:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("xvQ9"),a={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("mdc-layout-app",{staticClass:"itemList",nativeOn:{click:function(t){e.isShowMenu=""}}},[s("div",{staticClass:"flex",staticStyle:{position:"absolute",width:"100%"}},[s("header",[s("section",{staticClass:"linkHeader flexRow"},[s("div",{staticClass:"navigation"},[s("mdc-layout-grid",{staticStyle:{padding:"0"}},[s("mdc-layout-cell",{attrs:{desktop:"12",tablet:"12",phone:"3"}},[s("router-link",{staticClass:"btn_icon",attrs:{to:"/"}},[e._v(e._s(e.menuName))]),e._v(" "),s("mdc-icon",{attrs:{icon:"keyboard_arrow_right"}}),e._v(" "),s("router-link",{staticClass:"btn_icon",attrs:{to:{path:"/groupList/"+this.menuId,query:{groupId:this.groupId,menuName:this.menuName,groupName:this.groupName}}}},[e._v("\n                        "+e._s(e.groupName)+"\n                     ")]),e._v(" "),s("mdc-icon",{attrs:{icon:"keyboard_arrow_right"}}),e._v("\n                     "+e._s(e.catName)+"\n                  ")],1)],1)],1),e._v(" "),s("div",{staticClass:"search",staticStyle:{width:"200px","line-height":"45px",height:"45px",position:"relative"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],staticStyle:{border:"1px solid rgba(0, 0, 0, 0.12)",padding:"6px 10px","box-sizing":"border-box","font-size":"16px"},attrs:{type:"text",placeholder:e.$t("btns.searchItem")},domProps:{value:e.search},on:{input:function(t){t.target.composing||(e.search=t.target.value)}}}),e._v(" "),s("i",{staticClass:"material-icons left_icon",staticStyle:{position:"absolute",right:"5px",top:"12px"}},[e._v("search")])])]),e._v(" "),s("section",{staticClass:"flexRow",staticStyle:{margin:"10px 0 18px 0"}},[s("div",{class:{category:!0}},[s("button",{staticClass:"mdc-button bnt",on:{click:function(t){t.stopPropagation(),e.editItem({id:"New"})}}},[e._v("+ "+e._s(e.$t("btns.createNew"))+"\n               ")]),e._v(" "),s("button",{staticClass:"mdc-button bnt",on:{click:function(t){t.stopPropagation(),e.showMenu(t,"copy")}}},[e._v("+ "+e._s(e.$t("btns.copy"))+"  |  ▼")]),e._v(" "),s("button",{staticClass:"mdc-button bnt",on:{click:function(t){t.stopPropagation(),e.showMenu(t,"edit")}}},[e._v("+ "+e._s(e.$t("btns.edit"))+"  |  ▼")]),e._v(" "),s("button",{staticClass:"mdc-button bnt",on:{click:e.clickSeq}},[s("mdc-icon",{staticStyle:{"padding-top":"4px"},attrs:{icon:"menu"}}),e._v("\n                  "+e._s(e.$t("btns.sequence"))+"\n               ")],1),e._v(" "),s("button",{staticClass:"mdc-button bnt",on:{click:function(t){e.deleteItem()}}},[e._v(e._s(e.$t("btns.delete")))])]),e._v(" "),s("button",{staticClass:"mdc-button bnt",staticStyle:{"margin-right":"0"},on:{click:function(t){t.stopPropagation(),e.showMenu(t,"showHide")}}},[e._v(e._s(e.$t("btns.showHide")))]),e._v(" "),"copy"==e.isShowMenu?s("ul",{style:e.showStyle},e._l(e.copys,function(t,i){return s("li",{on:{click:function(t){e.copy(i)}}},[e._v(e._s(t.name))])})):e._e(),e._v(" "),"edit"==e.isShowMenu?s("ul",{style:e.showStyle},[e._l(e.edits,function(t,i){return e.systemGenerated?e._e():s("li",{on:{click:function(t){e.edit(i)}}},[e._v(e._s(t.name))])}),e._v(" "),e._l(e.edits,function(t,i){return e.systemGenerated&&i<=2?s("li",{on:{click:function(t){e.edit(i)}}},[e._v(e._s(t.name))]):e._e()})],2):e._e(),e._v(" "),s("ul",{directives:[{name:"show",rawName:"v-show",value:"showHide"==e.isShowMenu,expression:"isShowMenu=='showHide'"}],style:e.showStyle},e._l(e.showFilds,function(t,i){return s("li",{staticStyle:{color:"#000",background:"#fff"},on:{click:function(t){t.stopPropagation(),e.changeFields(i)}}},[s("span",{class:{hide:!0,isShow:t.active}},[e._v("√ ")]),e._v(" "+e._s(e.$t("fields."+t.name))+"\n               ")])}))])]),e._v(" "),s("div",{staticClass:"tHeader"},[s("div",[s("mdc-checkbox",{directives:[{name:"show",rawName:"v-show",value:!e.isSequence,expression:"!isSequence"}],on:{change:e.listSelectAll},model:{value:e.listCheckAll,callback:function(t){e.listCheckAll=t},expression:"listCheckAll "}})],1),e._v(" "),s("div",{staticStyle:{"text-align":"left"}},[s("span",{staticStyle:{"padding-left":"35px"}},[e._v(" "+e._s(e.$t("fields.itemName")))]),e._v(" "),s("mdc-icon",{staticStyle:{"vertical-align":"middle",cursor:"pointer","margin-left":"-5px"},attrs:{icon:e.sortDesc?"arrow_drop_down":"arrow_drop_up"},nativeOn:{click:function(t){return e.sortByLetter(t)}}})],1),e._v(" "),e._l(e.fieldsHeader,function(t,i){return s("div",[e._v(e._s(e.$t("fields."+t.name)))])})],2),e._v(" "),s("draggable",{class:{tBody:!0,mp:!0},attrs:{options:{disabled:!e.isSequence}},on:{start:function(t){e.drag=!1},end:function(t){e.drag=!0}},model:{value:e.listFilter,callback:function(t){e.listFilter=t},expression:"listFilter"}},e._l(e.listFilter,function(t,i){return s("div",{class:{row:!0}},[s("div",[e.isSequence?e._e():s("mdc-checkbox",{staticStyle:{"vertical-align":"middle"},on:{change:function(t){e.itemChoose(i)}},model:{value:t.choose,callback:function(s){e.$set(t,"choose",s)},expression:"item.choose"}}),e._v(" "),e.isSequence?s("mdc-icon",{staticStyle:{"padding-top":"13px","padding-left":"5px"},attrs:{icon:"menu"}}):e._e()],1),e._v(" "),s("div",[e.isSequence?s("a",{staticStyle:{"padding-left":"35px",display:"block","padding-top":"10px","line-height":"24px"}},[e._v(e._s(t.name))]):s("a",{staticStyle:{"padding-left":"35px",display:"block","padding-top":"10px","line-height":"24px"},on:{click:function(s){e.editItem(t)}}},[e._v(e._s(t.name))])]),e._v(" "),e._l(e.fieldsHeader,function(i,a){return s("div",["posName"==i.value?s("div",[e._v(" \n                  "+e._s(t.posName)+"\n               ")]):e._e(),e._v(" "),"hiddenItem"==i.value?s("div",{staticClass:"hiddenItem"},[e._v(e._s(t.hiddenItem?"YES":"NO"))]):e._e(),e._v(" "),"comboSections"==i.value?s("div",{class:i.className,on:{click:function(e){"SHOWCOMBO"==t.displayMode?t.displayMode="":t.displayMode="SHOWCOMBO"}}},[1==!!t.comboSections?s("span",{staticStyle:{color:"#2196F3"}},[e._v("YES")]):s("span",[e._v("NO")]),e._v(" "),e._l(t.comboSections,function(i,a){return"SHOWCOMBO"==t.displayMode?s("div",{staticClass:"combo"},[e._v(e._s(i.name))]):e._e()})],2):e._e(),e._v(" "),"options"==i.value?s("div",{class:i.className},[t.options&&t.options.length?s("div",{staticStyle:{color:"#2196F3"},on:{click:function(e){-1e3==t.displayPriority?t.displayPriority=0:t.displayPriority=-1e3}}},[e._v(e._s(e.$t("fields.detail"))+"\n                  ")]):e._e(),e._v(" "),e._l(t.options,function(i,a){return-1e3==t.displayPriority?s("div",{staticClass:"combo"},[e._v("\n                     "+e._s(i.name)+"\n                  ")]):e._e()})],2):e._e(),e._v(" "),"price"==i.value?s("div",{class:i.className},[t.itemPrices&&t.itemPrices.length?s("div",{staticStyle:{"padding-right":"20px",color:"#2196F3"},on:{click:function(e){-1e3==t.displayPriority?t.displayPriority=0:t.displayPriority=-1e3}}},[e._v(e._s(e.$t("fields.priceDetail"))+"\n                  ")]):e._e(),e._v(" "),e._l(t.itemPrices,function(i,a){return-1e3==t.displayPriority?s("div",{staticClass:"combo"},[e._v("\n                     "+e._s(i.size)+" "+e._s(e.$n(i.price,"currency"))+"\n                  ")]):e._e()}),e._v(" "),t.itemPrices&&t.itemPrices.length?e._e():s("span",{staticStyle:{"padding-right":"25px"}},[e._v("\n                  "+e._s(t.price?e.$n(t.price,"currency"):"$0.00"))])],2):e._e(),e._v(" "),"unitPriceItem"==i.value?s("div",[e._v(" \n                  "+e._s(t.baseWeight?"YES":"NO")+"\n               ")]):e._e(),e._v(" "),"color"==i.value?s("div",{staticClass:"colorPad",style:{background:"#"+t.color}},[e._v(" \n                    \n               ")]):e._e(),e._v(" "),"reportGroupId"==i.value?s("div",{class:i.className},[e._v("  \n                  "+e._s(e.GLOBAL.showName["G"+t.reportGroupId])+"\n               ")]):e._e(),e._v(" "),"printerIds"==i.value&&e.printers.length>0?s("div",{class:i.className},e._l(t.printerIds,function(t,i){return s("span",{key:i},[e._v("\n                  "+e._s(e.GLOBAL.showName["P"+t])+"\n                  ")])})):e._e(),e._v(" "),"kitchenName"==i.value?s("div",{class:i.className},[e._v(" \n                  "+e._s(t.shortName)+"\n               ")]):e._e(),e._v(" "),"itemNumber"==i.value?s("div",{staticClass:"tc"},[e._v(" \n                  "+e._s(t.itemNumber||"")+"\n               ")]):e._e(),e._v(" "),"description"==i.value?s("div",{class:i.className},[e._v(" \n                  "+e._s(t.description||"")+"\n               ")]):e._e(),e._v(" "),"properties"==i.value&&e.properties.length>0?s("div",{class:i.className},[e._l(t.properties,function(t,i){return"UNIT_PRICE_ITEM"!==t.name?s("span",{key:i},[e._v("\n                   "+e._s(t.displayName)+"\n                  ")]):e._e()}),e._v(" "),t.ktvItem?s("span",[e._v("KTV")]):e._e(),e._v(" "),t.outOfStock?s("span",[e._v("OutOfStock")]):e._e()],2):e._e(),e._v(" "),"thumbPath"==i.value?s("div",{class:i.className},[e._v(" \n                  "+e._s(t.thumbPath||"")+"\n               ")]):e._e()])})],2)})),e._v(" "),e.isSequence?s("div",{staticStyle:{"text-align":"right","margin-top":"10px",height:"35px"}},[s("mdc-button",{on:{click:function(t){e.saveSeq(!1)}}},[e._v(e._s(e.$t("btns.cancel")))]),e._v(" "),s("mdc-button",{staticClass:"btnColor",on:{click:function(t){e.saveSeq(!0)}}},[e._v(e._s(e.$t("btns.save")))])],1):e._e()],1),e._v(" "),s("div",{staticClass:"alert"},[s("mdc-dialog",{ref:"dialog",attrs:{title:e.$t("fields.noItem"),accept:e.$t("btns.goBack"),cancel:""},on:{accept:e.cancel}})],1),e._v(" "),s("div",{staticClass:"other"},[s("mdc-dialog",{ref:"otherDialog",attrs:{title:e.$t("fields.selectedTitle",{itemsCount:e.sendData.saleItemIds.length}),"accept-disabled":e.modalActive.length>0&&"edit2"==e.modalActive[0].key&&e.checkedPrinters.length<=0&&!0===e.sendToKitchenRequired||e.modalActive.length>0&&"edit0"==e.modalActive[0].key&&"1"===e.changePriceType&&""===e.changePriceTo,accept:e.$t("btns.save"),cancel:e.$t("btns.cancel")},on:{accept:e.ok,cacel:e.cancel}},[s("div",{staticStyle:{"min-height":"20px",width:"100%",color:"#000"}},[e._l(e.modalActive,function(t,i){return s("div",{staticStyle:{"margin-bottom":"15px"}},[e._v(e._s(t.title))])}),e._v(" "),e._l(e.modalActive,function(t,i){return s("div",["edit0"==t.key?s("div",{staticClass:"editPrice"},[s("mdc-layout-grid",[s("mdc-layout-cell",{attrs:{desktop:"4"}},[s("label",{staticClass:"menusifu-label"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.changePriceType,expression:"changePriceType"}],staticClass:"menusifu-radio",attrs:{type:"radio",name:"price",value:"1"},domProps:{checked:e._q(e.changePriceType,"1")},on:{change:function(t){e.changePriceType="1"}}}),e._v(" "+e._s(e.$t("fields.changeTo")))])]),e._v(" "),s("mdc-layout-cell",{attrs:{desktop:"8"}},[s("span",{staticClass:"pre-icon"},[e._v("$")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.changePriceTo,expression:"changePriceTo"}],attrs:{type:"text",placeholder:""},domProps:{value:e.changePriceTo},on:{keypress:e.checkPrice,blur:function(t){e.changePriceTo=/(^[1-9](\d+)?(\.\d{1,2})?$)|(^0$)|(^\d\.\d{1,2}$)/.test(e.changePriceTo)?e.changePriceTo:""},input:function(t){t.target.composing||(e.changePriceTo=t.target.value)}}}),e._v(" "),s("bubble",{directives:[{name:"show",rawName:"v-show",value:!e.systemGenerated,expression:"!systemGenerated"}]},[s("div",[e._v(e._s(e.$t("tips.bulkEditPrice.tip")))])])],1)],1),e._v(" "),s("mdc-layout-grid",[s("mdc-layout-cell",{attrs:{desktop:"4"}},[s("label",{staticClass:"menusifu-label"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.changePriceType,expression:"changePriceType"}],staticClass:"menusifu-radio",attrs:{type:"radio",name:"price",value:"2"},domProps:{checked:e._q(e.changePriceType,"2")},on:{change:function(t){e.changePriceType="2"}}}),e._v(" "+e._s(e.$t("fields.increaseTo")))])]),e._v(" "),s("mdc-layout-cell",{attrs:{desktop:"8"}},[s("span",{staticClass:"pre-icon"},[e._v("$")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.increasePriceTo,expression:"increasePriceTo"}],attrs:{type:"text",placeholder:""},domProps:{value:e.increasePriceTo},on:{keypress:e.checkPrice,blur:function(t){e.increasePriceTo=/(^-?[1-9](\d+)?(\.\d{1,2})?$)|(^-?0$)|(^-?\d\.\d{1,2}$)/.test(e.increasePriceTo)?e.increasePriceTo:""},input:function(t){t.target.composing||(e.increasePriceTo=t.target.value)}}})])],1),e._v(" "),s("mdc-layout-grid",[s("mdc-layout-cell",{attrs:{desktop:"4"}},[s("label",{staticClass:"menusifu-label"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.changePriceType,expression:"changePriceType"}],staticClass:"menusifu-radio",attrs:{type:"radio",name:"price",value:"3"},domProps:{checked:e._q(e.changePriceType,"3")},on:{change:function(t){e.changePriceType="3"}}}),e._v(" "+e._s(e.$t("fields.increaseBy")))])]),e._v(" "),s("mdc-layout-cell",{attrs:{desktop:"8"}},[s("span",{staticClass:"end-icon"},[e._v("%")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.increasePricePercent,expression:"increasePricePercent"}],attrs:{type:"number",placeholder:""},domProps:{value:e.increasePricePercent},on:{keypress:e.checkPercent,blur:function(t){e.increasePricePercent=/(^-?[1-9](\d+)?(\.\d{1,2})?$)|(^-?0$)|(^-?\d\.\d{1,2}$)/.test(e.increasePricePercent)?e.increasePricePercent:""},input:function(t){t.target.composing||(e.increasePricePercent=t.target.value)}}})])],1)],1):e._e(),e._v(" "),"edit1"==t.key?s("div",{staticClass:"re",staticStyle:{width:"40%"}},[s("color-picker",{attrs:{color:e.color,isShow:e.isShowColor},on:{"update:color":function(t){e.color=t.color,e.isShowColor=t.isShow}}})],1):e._e(),e._v(" "),"edit2"==t.key?s("div",{staticClass:"printers"},[s("div",{staticStyle:{flex:"0 0 100%",display:"flex"}},[s("mdc-checkbox",{attrs:{label:e.$t("fields.sendToKitchenRequired")},on:{change:function(t){e.changeSend()}},model:{value:e.sendToKitchenRequired,callback:function(t){e.sendToKitchenRequired=t},expression:"sendToKitchenRequired"}})],1),e._v(" "),e._l(e.printers,function(t,i){return s("div",{class:{notWork:!e.sendToKitchenRequired}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedPrinters,expression:"checkedPrinters"}],staticClass:"checked dsn",attrs:{type:"checkbox",name:"selectPrinters",id:t.id},domProps:{value:t.id,checked:Array.isArray(e.checkedPrinters)?e._i(e.checkedPrinters,t.id)>-1:e.checkedPrinters},on:{change:function(s){var i=e.checkedPrinters,a=s.target,n=!!a.checked;if(Array.isArray(i)){var r=t.id,o=e._i(i,r);a.checked?o<0&&(e.checkedPrinters=i.concat([r])):o>-1&&(e.checkedPrinters=i.slice(0,o).concat(i.slice(o+1)))}else e.checkedPrinters=n}}}),e._v(" "),s("label",{staticClass:"item",attrs:{for:t.id}},[e._v(e._s(t.name)+"\n                     ")])])})],2):e._e(),e._v(" "),"edit3"==t.key?s("div",[s("mdc-select",{staticStyle:{width:"250px","line-height":"1.4"},attrs:{label:""},model:{value:e.categoryId,callback:function(t){e.categoryId=t},expression:"categoryId"}},e._l(e.editCategoryList,function(t,i){return s("div",{key:i},[s("optgroup",{attrs:{label:t.name}}),e._v(" "),e._l(t.menuCategories||t.globalOptionCategories,function(t,i){return s("mdc-option",{key:i,attrs:{value:t.id+""}},[e._v(e._s(t.name))])})],2)}))],1):e._e(),e._v(" "),"edit4"==t.key?s("div",{staticClass:"properties"},e._l(e.properties,function(t,i){return s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedProperties,expression:"checkedProperties"}],staticClass:"checked dsn",attrs:{type:"checkbox",name:"selectProperties",id:t.name},domProps:{value:t.name,checked:Array.isArray(e.checkedProperties)?e._i(e.checkedProperties,t.name)>-1:e.checkedProperties},on:{change:function(s){var i=e.checkedProperties,a=s.target,n=!!a.checked;if(Array.isArray(i)){var r=t.name,o=e._i(i,r);a.checked?o<0&&(e.checkedProperties=i.concat([r])):o>-1&&(e.checkedProperties=i.slice(0,o).concat(i.slice(o+1)))}else e.checkedProperties=n}}}),e._v(" "),s("label",{staticClass:"item",attrs:{for:t.name}},[e._v(e._s(t.displayName))])])})):e._e(),e._v(" "),"copy1"==t.key?s("div",[s("mdc-select",{staticStyle:{width:"250px","line-height":"1.3"},attrs:{label:""},model:{value:e.categoryId,callback:function(t){e.categoryId=t},expression:"categoryId"}},e._l(e.editCategoryList,function(t,i){return s("div",{key:i},[s("optgroup",{attrs:{label:t.name}}),e._v(" "),e._l(t.menuCategories||t.globalOptionCategories,function(t,i){return s("mdc-option",{key:i,attrs:{value:t.id+""}},[e._v(e._s(t.name))])})],2)}))],1):e._e(),e._v(" "),"edit5"==t.key?s("div",[s("mdc-checkbox",{attrs:{label:e.$t("btns.hiddenItem")},model:{value:e.editHiddenItem,callback:function(t){e.editHiddenItem=t},expression:"editHiddenItem"}})],1):e._e()])})],2)])],1),e._v(" "),s("mdc-snackbar",{ref:"snackbar",staticClass:"success-snackbar"}),e._v(" "),s("section",[s("mdc-dialog",{ref:"responseDialog",staticClass:"responseDialog",attrs:{title:e.responseMsg,cancel:"",accept:e.$t("btns.ok")}},[e._v(e._s(e.responseDetail))])],1),e._v(" "),s("section",{staticClass:"confirmDialog-box"},[s("mdc-dialog",{ref:"confirmDialog",staticClass:"responseDialog",attrs:{title:e.$t("fields.delTips"),cancel:e.$t("btns.cancel"),accept:e.$t("btns.delete")},on:{accept:e.ok}})],1),e._v(" "),s("mdc-snackbar",{ref:"snackbar",staticClass:"success-snackbar"}),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.dataLoading,expression:"dataLoading"}],staticClass:"loading-circle"})],1)},staticRenderFns:[]};var n=function(e){s("wmuN")},r=s("vSla")(i.a,a,!1,n,null,null);t.default=r.exports},wmuN:function(e,t){},xvQ9:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__=__webpack_require__("3cXf"),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign__=__webpack_require__("aA9S"),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign__),__WEBPACK_IMPORTED_MODULE_2__utils_common_common_js__=__webpack_require__("JahA"),__WEBPACK_IMPORTED_MODULE_3_vuedraggable__=__webpack_require__("405r"),__WEBPACK_IMPORTED_MODULE_3_vuedraggable___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_vuedraggable__),__WEBPACK_IMPORTED_MODULE_4_components_colorPicker__=__webpack_require__("WVI2"),__WEBPACK_IMPORTED_MODULE_5_components_bubble__=__webpack_require__("VbKi");__webpack_exports__.a={components:{Draggable:__WEBPACK_IMPORTED_MODULE_3_vuedraggable___default.a,ColorPicker:__WEBPACK_IMPORTED_MODULE_4_components_colorPicker__.a,Bubble:__WEBPACK_IMPORTED_MODULE_5_components_bubble__.a},data:function data(){return{itemFiledCookie:"MENUSIFU_ITEMLIST_ITEM_FIELDS",optionFiledCookie:"MENUSIFU_ITEMLIST_OPTION_FIELDS",listCheckAll:!1,isItemListChecked:[],responseMsg:"",responseDetail:"",fields:[],copys:[{name:this.$t("btns.newItem"),key:1},{name:this.$t("btns.otherCategory"),key:2}],edits:[{name:this.$t("btns.price"),key:1},{name:this.$t("btns.color"),key:2},{name:this.$t("btns.printer"),key:3},{name:this.$t("btns.category"),key:5},{name:this.$t("btns.properties"),key:6},{name:this.$t("btns.hiddenItem"),key:7}],category:{},isSequence:!1,ischoose:!1,draggable:!1,isShowColor:!1,sendData:{saleItemIds:[]},sendDataExt:{detailPrice:[]},modalArray:[{title:"copy0",key:"copy0",active:!1},{title:this.$t("fields.copyTo"),key:"copy1",active:!1},{title:this.$t("fields.priceTitle"),key:"edit0",active:!1},{title:this.$t("fields.colorTitle"),key:"edit1",active:!1},{title:this.$t("fields.printerTitle"),key:"edit2",active:!1},{title:this.$t("fields.categoryTitle"),key:"edit3",active:!1},{title:this.$t("fields.propertiesTitle"),key:"edit4",active:!1},{title:this.$t("fields.hiddenItemTitle"),key:"edit5",active:!1}],changePriceType:"1",changePriceTo:"",increasePriceTo:"",increasePricePercent:"",changePrice:[{value:"",active:!1},{value:"",active:!1},{value:"",active:!1}],printers:[],menuGroups:[],reportGroupId:"",color:"7DBFE2",price:"",selected:"",groups:[],properties:[],categoryId:"",checkedProperties:[],checkedPrinters:[],comboSections:{},search:"",menuId:this.$route.query.menuId,sendToKitchenRequired:!0,basketAddSuccess:!1,testName:"",currencyCatId:this.$route.params.categoryId,restaurantName:this.$route.query.n||"",menuName:this.$route.query.menuName||"",groupId:this.$route.query.groupId,groupName:this.$route.query.groupName||"",catName:this.$route.query.categoryName||"",isShowMenu:"",showStyle:{},fieldsRecords:[],systemGenerated:eval(this.$route.query.systemGenerated.toString()),editHiddenItem:!1,sortDesc:!0,editCategoryList:[],dataLoading:!1}},created:function(){this.GLOBAL.categoryId=this.GLOBAL.categoryId||this.$route.params.categoryId},computed:{language:function(){return this.$store.state.language},fieldsHeader:function(){return this.fields.filter(function(e){return!0===e.active})},getMenuGroups:function(){return this.categories.filter(function(e){return 0===e.parent})},modalActive:function(){return this.modalArray.filter(function(e){return!0===e.active})},showFilds:function(){return this.systemGenerated?this.fields=this.getCookie(this.optionFiledCookie)&&JSON.parse(this.getCookie(this.optionFiledCookie))||[{name:"kitchenName",active:!0,value:"kitchenName",time:100,className:""},{name:"color",active:!0,value:"color",time:99,className:"tc"},{name:"price",active:!0,value:"price",time:98,className:"money"},{name:"printer",active:!0,value:"printerIds",time:97,className:"spanSplit"},{name:"posName",active:!1,value:"posName",time:96,className:""}]:this.fields=this.getCookie(this.itemFiledCookie)&&JSON.parse(this.getCookie(this.itemFiledCookie))||[{name:"kitchenName",active:!0,value:"kitchenName",time:100,className:""},{name:"color",active:!0,value:"color",time:99,className:"tc"},{name:"price",active:!0,value:"price",time:98,className:"money"},{name:"printer",active:!0,value:"printerIds",time:97,className:"spanSplit"},{name:"posName",active:!1,value:"posName",time:96,className:""},{name:"number",active:!1,value:"itemNumber",time:95,className:"tc"},{name:"hideItem",active:!1,value:"hiddenItem",time:93,className:"hiddenItem"},{name:"combo",active:!1,value:"comboSections",time:92,className:"tac"},{name:"unitPrice",active:!1,value:"unitPriceItem",time:91,className:""},{name:"labelAndProperties",active:!1,value:"properties",time:90,className:"spanSplit"},{name:"options",active:!1,value:"options",time:89,className:"tac"},{name:"description",active:!1,value:"description",time:87,className:""},{name:"image",active:!1,value:"thumbPath",time:86,className:"tac"}],this.fields},listFilter:{get:function(){var e=this,t=(this.category.globalOptions||this.category.saleItems||[]).filter(function(t){return(t.name||"").toUpperCase().indexOf(e.search.toUpperCase())>-1});return this.listCheckAll=t.length>0&&t.every(function(e){return e.choose}),t},set:function(e){this.category=[],this.category.globalOptions&&(this.category.globalOptions=e),this.category.saleItems=e}}},mounted:function(){this.getPrinters(),this.getProperties(),this.getItems(this.currencyCatId)},methods:{listSelectAll:function(){this.listFilter.map(function(e){e.choose=event.target.checked,event.target.checked&&(e.itemPrices&&e.itemPrices.length>0||e.marketPriceItem)})},itemChoose:function(e){this.listFilter.forEach(function(t,s){e===s&&(t.choose=event.target.checked),t.choose&&(t.itemPrices&&t.itemPrices.length>0||t.marketPriceItem)})},editItem:function(e){var t=e.id,s=this.systemGenerated?"globaloption":"item",i={menuId:this.menuId,groupId:this.groupId,rn:this.restaurantName,menuName:this.menuName,groupName:this.groupName,categoryName:this.catName,systemGenerated:this.systemGenerated};this.$router.push({path:"/"+s+"/"+this.currencyCatId+"/"+t,query:i})},showMenu:function(e,t){if(this.isShowMenu!=t){this.isShowMenu=t;var s=e.target.getBoundingClientRect();this.showStyle="showHide"==t?{position:"absolute","z-index":"10",right:"0px",top:s.top+6+"px"}:{position:"absolute","z-index":"10",left:s.left-50+"px",top:s.top+6+"px"}}else this.isShowMenu=""},clickSeq:function(){this.isSequence&&this.getItems(this.currencyCatId),this.isSequence=!this.isSequence},saveSeq:function(e){if(e){for(var t in this.selected="sequence",this.sendData.saleItemIds=[],this.category.saleItems)this.sendData.saleItemIds.push(this.category.saleItems[t].id);this.ok()}else this.getItems(this.currencyCatId),this.isSequence=!1},cancel:function(){},delItem:function(){var e=this,t=this.sendData;this.$$fetch_item_itemDelete({data:t,opts:{}}).then(function(t){e.getItems(e.currencyCatId),e.responseFun(e.$t("msg.deleteSuccess"),"ok")},function(t){e.responseFun(t.error.msg,"error")})},delGlobalItem:function(){var e=this,t={};t.globalOptionIds=this.sendData.saleItemIds,this.$$fetch_item_optionDelete({data:t,opts:{}}).then(function(t){e.getItems(e.currencyCatId),e.responseFun(e.$t("msg.deleteSuccess"),"ok")},function(t){e.responseFun(t.error.msg,"error")})},sequenceItem:function(e){var t=this;this.$$fetch_item_sequence({data:e,opts:{}}).then(function(e){t.responseFun(t.$t("msg.seqSuccess")),t.getItems(t.currencyCatId),t.isSequence=!1},function(e){t.responseFun(e.error.msg,"error")})},sequenceItemOption:function(e){var t=this;(e={}).globalOptionIds=this.sendData.saleItemIds,this.$$fetch_item_sequenceOption({data:e,opts:{}}).then(function(e){t.responseFun(t.$t("msg.seqSuccess")),t.getItems(t.currencyCatId),t.isSequence=!1},function(e){t.responseFun(e.error.msg,"error")})},checkPrice:function(){var e=event.target.value;(46!==event.keyCode&&event.keyCode<48||event.keyCode>57||e.indexOf(".")>-1&&46===event.keyCode||"0"===e&&48===event.keyCode||0===e.length&&46===event.keyCode||/\d?\.(\d){2,}/g.test(e))&&(event.returnValue=!1)},checkPercent:function(){event.target.value;46===event.keyCode&&(event.returnValue=!1)},ok:function(){switch(this.selected){case"delete":this.systemGenerated?this.delGlobalItem():this.delItem();break;case"sequence":var e=this.sendData;this.systemGenerated?this.sequenceItemOption(e):this.sequenceItem(e);break;case"edit0":"1"===this.changePriceType&&""!==this.changePriceTo&&__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default()(this.sendData,{price:parseFloat(this.changePriceTo)}),"2"===this.changePriceType&&""!==this.increasePriceTo&&__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default()(this.sendData,{increasePrice:parseFloat(this.increasePriceTo)}),"3"===this.changePriceType&&""!==this.increasePricePercent&&__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default()(this.sendData,{percentagePrice:parseFloat(this.increasePricePercent)});break;case"edit1":this.color&&(this.sendData.color=this.color.replace("#",""));break;case"edit2":this.sendData.sendToKitchenRequired=this.sendToKitchenRequired,null===this.checkedPrinters||this.checkedPrinters,this.sendData.printerIds=this.checkedPrinters;break;case"edit3":this.sendData.categoryId=this.categoryId;break;case"edit4":this.sendData.propertyNames=this.checkedProperties,this.sendData.ktvItem=!1,this.sendData.outOfStock=!1;for(var t=this.sendData.propertyNames.length-1;t>=0;t--)"KTV"==this.sendData.propertyNames[t]&&(this.sendData.ktvItem=!0,this.sendData.propertyNames.splice(t,1)),"outOfStock"==this.sendData.propertyNames[t]&&(this.sendData.outOfStock=!0,this.sendData.propertyNames.splice(t,1));break;case"copy1":this.categoryId&&(this.sendData.categoryId=this.categoryId);break;case"edit5":this.sendData.hiddenItem=this.editHiddenItem,console.log("this.sendData",this.sendData)}e=this.sendData;"delete"!==this.selected&&"sequence"!==this.selected&&("copy0"!=this.selected&&"copy1"!=this.selected?this.systemGenerated?this.updateOptionItem(e):this.updateItem(e):this.systemGenerated?this.copyOptionsItem(e):this.copyItem(e))},updateItem:function(e){var t=this;this.$$fetch_item_itemUpdate({data:e,opts:{}}).then(function(e){"OK"==e.result&&("edit0"===t.selected&&(e.hasDetailPriceItem||e.hasOpenPriceItem)&&"1"===t.changePriceType?(t.responseDetail=t.$t("msg.changePriceError"),t.responseFun(t.$t("msg.changePriceErrorTitle"),"error")):t.responseFun(t.$t("msg.editSuccess"),"ok"),t.getItems(t.currencyCatId))},function(e){t.responseFun(e.error.msg,"error")})},updateOptionItem:function(e){var t=this;e.optionIds=e.saleItemIds,this.$$fetch_item_itemOptionUpdate({data:e,opts:{}}).then(function(e){"OK"==e.result&&t.getItems(t.currencyCatId)},function(e){t.responseFun(e.error.msg,"error")})},copyItem:function(e){var t=this;this.$$fetch_item_itemCopy({data:e,opts:{}}).then(function(e){t.categoryId=-1,t.getItems(t.currencyCatId),t.responseFun(t.$t("msg.copySuccess"),"ok")},function(e){t.responseFun(e.error.msg,"error")})},copyOptionsItem:function(e){var t=this,s={};s.categoryId=e.categoryId,s.optionIds=e.saleItemIds,this.$$fetch_item_optionCopy({data:s,opts:{}}).then(function(e){t.categoryId=-1,t.getItems(t.currencyCatId),t.responseFun(t.$t("msg.copySuccess"),"ok")},function(e){t.responseFun(e.error.msg,"error")})},changeSend:function(){this.sendToKitchenRequired||(this.checkedPrinters=[])},deleteItem:function(){for(var e in this.sendData={saleItemIds:[]},this.selected="delete",this.category.saleItems)this.category.saleItems[e].choose&&this.sendData.saleItemIds.push(this.category.saleItems[e].id);this.sendData.saleItemIds.length<1?this.$refs.dialog.show():this.$refs.confirmDialog.show()},changeFields:function(e){var t=[];for(var s in this.fields)this.fields[s].active&&t.push({key:s,time:this.fields[s].time});if(t.sort(function(e,t){return e.time>t.time?1:-1}),this.fields[e].active)return!1;t.length>=4&&(this.fields[t[0].key].active=!1),this.fields[e].active=!0,this.fields[e].time=(new Date).getTime(),this.systemGenerated?this.setCookie(this.optionFiledCookie,__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(this.fields)):this.setCookie(this.itemFiledCookie,__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(this.fields))},setCookie:function(e,t){var s=new Date;s.setTime(s.getTime()+31536e6);var i="expires="+s.toUTCString();document.cookie=e+"="+t+"; "+i},getCookie:function(e){for(var t=e+"=",s=document.cookie.split(";"),i=0;i<s.length;i++){for(var a=s[i];" "==a.charAt(0);)a=a.substring(1);if(-1!=a.indexOf(t))return a.substring(t.length,a.length)}return""},change:function(e){if(1==this.changePrice[e].active)for(var t in this.changePrice)e!=t&&(this.changePrice[t].value="",this.changePrice[t].active=!1)},edit:function(e){var t=this;for(var s in this.sendData={saleItemIds:[]},this.sendDataExt.detailPrice=[],this.category.saleItems)this.category.saleItems[s].choose&&this.sendData.saleItemIds.push(this.category.saleItems[s].id);var i="edit"+e;for(var e in this.selected=i,this.modalArray)this.modalArray[e].key==i?this.modalArray[e].active=!0:this.modalArray[e].active=!1;if(this.sendData.saleItemIds.length<1)this.$refs.dialog.show();else switch(i){case"edit0":this.changePriceType="1",this.changePriceTo="",this.increasePricePercent="",this.increasePriceTo="",this.$refs.otherDialog.show();break;case"edit2":this.sendData.printerIds=[],this.checkedPrinters=[],this.sendToKitchenRequired=!0,this.$refs.otherDialog.show();break;case"edit4":this.sendData.propertyNames=[],this.checkedProperties=[],this.$refs.otherDialog.show();break;case"edit3":0===this.editCategoryList.length?this.getGroup(function(){t.$refs.otherDialog.show()}):this.$refs.otherDialog.show();break;case"edit5":default:this.$refs.otherDialog.show()}},copy:function(e){var t=this;for(var s in this.sendData={saleItemIds:[]},this.category.saleItems)this.category.saleItems[s].choose&&this.sendData.saleItemIds.push(this.category.saleItems[s].id);var i="copy"+e;for(var e in this.selected=i,this.modalArray)this.modalArray[e].key===i?this.modalArray[e].active=!0:this.modalArray[e].active=!1;this.sendData.saleItemIds.length<1?this.$refs.dialog.show():"copy1"==i?0===this.editCategoryList.length?this.getGroup(function(){t.$refs.otherDialog.show()}):this.$refs.otherDialog.show():(this.sendData.categoryId=this.currencyCatId,this.ok())},getProperties:function(){var e=this;this.$$fetch_item_getProperties({data:{targetType:"SALE_ITEM",targetValue:!0,adminReadable:!0},opts:{}}).then(function(t){for(var s=t.itemProperties,i=0;i<s.length;i++){if("UNIT_PRICE_ITEM"==s[i].name){s.splice(i,1);break}}for(var i in e.properties=s,e.properties.push({name:"KTV",displayName:e.$t("fields.ktv")}),e.properties.push({name:"outOfStock",displayName:e.$t("fields.outOfStock")}),e.properties)e.GLOBAL.showName["A"+e.properties[i].name]=e.properties[i].displayName;e.GLOBAL.showName.AKTV=e.$t("fields.ktv"),e.GLOBAL.showName.AoutOfStock=e.$t("fields.outOfStock"),e.GLOBAL.properties=e.properties},function(t){e.responseFun(t.error.msg,"error")})},getGroup:function(e){var t=this;this.$$fetch_restaurant_getLiteMenuInfo({opts:{getTpye:"afterUrl",afterData:this.menuId},data:{expandMenuLevel:2,showInactive:!0,showOption:!1}}).then(function(s){t.editCategoryList=s.menu.menuGroups,e&&e()},function(e){t.$emit("response",e.error.msg,"error")})},getPrinters:function(){var e=this;this.$$fetch_item_getAllPrinters({data:{},opts:{}}).then(function(t){for(var s in e.printers=t.printerList,e.GLOBAL.printers=e.printers,e.printers)e.GLOBAL.showName["P"+e.printers[s].id]=e.printers[s].name},function(t){e.responseFun(t.error.msg,"error")})},getItems:function(e){var t=this;this.dataLoading=!0,this.systemGenerated?this.$$fetch_item_getAllItemsOptions({data:{id:this.$route.params.categoryId,showReportItem:!1},opts:{afterData:e,getTpye:"afterUrl"}}).then(function(e){t.category=e.globalOptionCategory,""===t.catName&&(t.catName=e.globalOptionCategory.name),t.category.saleItems=t.category.globalOptions,t.category.saleItems&&t.category.saleItems.forEach(function(e){e.fieldDisplayNameGroups&&e.fieldDisplayNameGroups.length>0&&e.fieldDisplayNameGroups.forEach(function(s){e=__WEBPACK_IMPORTED_MODULE_2__utils_common_common_js__.a.getObjLangField(s.fieldName,s.fieldDisplayNames,e,t.language)})}),t.dataLoading=!1},function(e){t.responseFun(e.error.msg,"error")}):this.$$fetch_item_getAllItems({data:{expandMenuLevel:1,showReportItem:!1},opts:{afterData:e,getTpye:"afterUrl"}}).then(function(e){t.category=e.menuCategory,""===t.catName&&(t.catName=e.menuCategory.name),t.category.saleItems&&t.category.saleItems.forEach(function(e){e.fieldDisplayNameGroups&&e.fieldDisplayNameGroups.length>0&&e.fieldDisplayNameGroups.forEach(function(s){e=__WEBPACK_IMPORTED_MODULE_2__utils_common_common_js__.a.getObjLangField(s.fieldName,s.fieldDisplayNames,e,t.language)})}),t.dataLoading=!1},function(e){t.responseFun(e.error.msg,"error")})},responseFun:function(e,t){"error"===t?(this.$refs.responseDialog.show(),this.responseMsg=e):this.$refs.snackbar.show({message:e}),this.dataLoading=!1},sortByLetter:function(){var e=this;this.sortDesc=!this.sortDesc,this.listFilter=this.listFilter.sort(function(t,s){return e.sortDesc?t.name.toLowerCase()<s.name.toLowerCase()?1:-1:t.name.toLowerCase()>s.name.toLowerCase()?1:-1})}},stores:{}}}});